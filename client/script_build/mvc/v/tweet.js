/*! petal_client 2013-07-08 */
define(["underscore","backbone","mustache","v/menu","text!tpl/tweet.html"],function(a,b,c,d,e){"use strict";var f=b.View.extend({template:e,events:{"tap .submit_btn":"tweetIt"},initialize:function(){new d,a.bindAll(this,"tweetIt"),this.model=window.objectUser,this.render()},tweetIt:function(){var a=this.$el.find(".tweet_input");null!==a.val()&&$.post("/api/tweet_it/",{user_id:window.objectUser.get("UserId"),content:a.val()},function(a){"ok"===JSON.parse(a)[0]&&window.router.navigate("/#stream",{trigger:!0})})},render:function(){this.$el=$.ui.addOrUpdateDiv("tweet",""),$.ui.updateContentDiv("tweet",c.to_html(this.template,window.objectUser.toJSON())),$.ui.loadContent("#tweet/self",!1,!1,"none")}});return f});