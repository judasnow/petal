/*! petal_client 2013-07-08 */
define(["underscore","backbone","mustache","m/user","text!tpl/menu.html","lib/helper"],function(a,b,c,d,e,f){"use strict";var g=b.View.extend({template:e,el:"#menu",events:{"tap #object_user_info":"showObjectUserHome","tap .stream_same_city":"showSameCityStream","tap .search":"showSearch","tap .tweet":"showTweet","tap .gifts":"showGifts","tap .had_bought_contact_info":"showHadBoughtContactInfo","tap .msgs":"showMsgs","tap .visitors":"showVisitors","tap .buy_coin":"showBuyCoin","tap .payment_record":"showPatmentRecord","tap .coupons":"showCoupons","tap .service":"showService"},initialize:function(){a.bindAll(this,"render","showObjectUserHome","showSameCityStream","showSearch"),this.model=new d,this.model.on("change",this.render),this.model.set(window.objectUser.toJSON())},showObjectUserHome:function(){window.router.navigate("/#user_detail/"+window.objectUser.get("UserId"),{trigger:!0})},showSearch:function(){window.router.navigate("/#search",{trigger:!0})},showSameCityStream:function(){window.router.navigate("/#stream",{trigger:!0})},showTweet:function(){window.router.navigate("/#tweet/self",{trigger:!0})},showGifts:function(){window.localStorage.setItem("petal:new_gifts_count","0"),window.router.navigate("/#gifts/self/received",{trigger:!0})},showVisitors:function(){window.localStorage.setItem("petal:new_visitors_count","0"),window.router.navigate("/#stream/visitors/self/",{trigger:!0})},showHadBoughtContactInfo:function(){window.router.navigate("/#stream/had_bought_contact_info/self",{trigger:!0})},showPatmentRecord:function(){window.router.navigate("/#payment_record/self",{trigger:!0})},showCoupons:function(){window.router.navigate("/#coupons/self",{trigger:!0})},showBuyCoin:function(){window.router.navigate("/#buy_coin",{trigger:!0})},showMsgs:function(){window.localStorage.setItem("petal:new_msgs_count","0"),window.router.navigate("/#msgs",{trigger:!0})},showService:function(){window.router.navigate("/#service",{trigger:!0})},render:function(){return $.ui.updateSideMenu(c.to_html(this.template,this.model.toJSON())),f.showImage(this.$el.find("img")),window.updateMenuNotice(),this}});return g});