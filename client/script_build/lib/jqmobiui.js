/*! petal_client 2013-07-12 */
!function(a){var b=[],c=function(b){return b.jqmCSS3AnimateId||(b.jqmCSS3AnimateId=a.uuid()),b.jqmCSS3AnimateId},d=function(b){return"string"==typeof b||b instanceof String?document.getElementById(b):a.is$(b)?b[0]:b},e=function(a,e){var f,g,h=d(a);return g=c(h),b[g]?(b[g].animate(e),f=b[g]):(f=i(h,e),b[g]=f),f};a.fn.css3Animate=function(a){!a.complete&&a.callback&&(a.complete=a.callback);var b=e(this[0],a);a.complete=null,a.sucess=null,a.failure=null;for(var c=1;c<this.length;c++)b.link(this[c],a);return b},a.css3AnimateQueue=function(){return new i.queue};var f=a.feat.cssTransformStart,g=a.feat.cssTransformEnd,h=a.feat.cssPrefix.replace(/-/g,"")+"TransitionEnd";h=a.os.fennec||""==a.feat.cssPrefix||a.os.ie?"transitionend":h,h=h.replace(h.charAt(0),h.charAt(0).toLowerCase());var i=function(){var c=function(d,e){if(!(this instanceof c))return new c(d,e);if(this.callbacksStack=[],this.activeEvent=null,this.countStack=0,this.isActive=!1,this.el=d,this.linkFinishedProxy_=a.proxy(this.linkFinished,this),this.el){this.animate(e);var f=this;jq(this.el).bind("destroy",function(){var a=f.el.jqmCSS3AnimateId;f.callbacksStack=[],b[a]&&delete b[a]})}};return c.prototype={animate:function(b){if(this.isActive&&this.cancel(),this.isActive=!0,!b)return alert("Please provide configuration options for animation of "+this.el.id),void 0;var c=!!b.addClass;if(c)b.removeClass?jq(this.el).replaceClass(b.removeClass,b.addClass):jq(this.el).addClass(b.addClass);else{var d=numOnly(b.time);if(0==d&&(b.time=0),b.y||(b.y=0),b.x||(b.x=0),b.previous){var e=new a.getCssMatrix(this.el);b.y+=numOnly(e.f),b.x+=numOnly(e.e)}b.origin||(b.origin="0% 0%"),b.scale||(b.scale="1"),b.rotateY||(b.rotateY="0"),b.rotateX||(b.rotateX="0"),b.skewY||(b.skewY="0"),b.skewX||(b.skewX="0"),b.timingFunction||(b.timingFunction="linear"),("number"==typeof b.x||-1==b.x.indexOf("%")&&-1==b.x.toLowerCase().indexOf("px")&&-1==b.x.toLowerCase().indexOf("deg"))&&(b.x=parseInt(b.x)+"px"),("number"==typeof b.y||-1==b.y.indexOf("%")&&-1==b.y.toLowerCase().indexOf("px")&&-1==b.y.toLowerCase().indexOf("deg"))&&(b.y=parseInt(b.y)+"px");var i="translate"+f+b.x+","+b.y+g+" scale("+parseFloat(b.scale)+") rotate("+b.rotateX+")";a.os.opera||(i+=" rotateY("+b.rotateY+")"),i+=" skew("+b.skewX+","+b.skewY+")",this.el.style[a.feat.cssPrefix+"Transform"]=i,this.el.style[a.feat.cssPrefix+"BackfaceVisibility"]="hidden";var j=a.feat.cssPrefix+"Transform";if(void 0!==b.opacity&&(this.el.style.opacity=b.opacity,j+=", opacity"),b.width&&(this.el.style.width=b.width,j="all"),b.height&&(this.el.style.height=b.height,j="all"),this.el.style[a.feat.cssPrefix+"TransitionProperty"]="all",-1===(""+b.time).indexOf("s"))var k="ms",l=b.time+k;else if(-1!==b.time.indexOf("ms"))var k="ms",l=b.time;else var k="s",l=b.time+k;this.el.style[a.feat.cssPrefix+"TransitionDuration"]=l,this.el.style[a.feat.cssPrefix+"TransitionTimingFunction"]=b.timingFunction,this.el.style[a.feat.cssPrefix+"TransformOrigin"]=b.origin}this.callbacksStack.push({complete:b.complete,success:b.success,failure:b.failure}),this.countStack++;var m=this,n=window.getComputedStyle(this.el);if(c){var o=n[a.feat.cssPrefix+"TransitionDuration"],d=numOnly(o);b.time=d,-1!==o.indexOf("ms")?k="ms":(b.time*=1e3,k="s")}if(0==d||"ms"==k&&5>d||"none"==n.display)a.asap(a.proxy(this.finishAnimation,this,[!1]));else{var m=this;this.activeEvent=function(a){clearTimeout(m.timeout),m.finishAnimation(a),m.el.removeEventListener(h,m.activeEvent,!1)},m.timeout=setTimeout(this.activeEvent,numOnly(b.time)+50),this.el.addEventListener(h,this.activeEvent,!1)}},addCallbackHook:function(a){return a&&this.callbacksStack.push(a),this.countStack++,this.linkFinishedProxy_},linkFinished:function(a){a?this.cancel():this.finishAnimation()},finishAnimation:function(a){a&&a.preventDefault(),this.isActive&&(this.countStack--,0==this.countStack&&this.fireCallbacks(!1))},fireCallbacks:function(a){this.clearEvents();var b=this.callbacksStack;this.cleanup();for(var c=0;c<b.length;c++){var d=b[c].complete,e=b[c].success,f=b[c].failure;d&&"function"==typeof d&&d(a),a&&f&&"function"==typeof f?f():e&&"function"==typeof e&&e()}},cancel:function(){this.isActive&&this.fireCallbacks(!0)},cleanup:function(){this.callbacksStack=[],this.isActive=!1,this.countStack=0},clearEvents:function(){this.activeEvent&&this.el.removeEventListener(h,this.activeEvent,!1),this.activeEvent=null},link:function(a,b){var c={complete:b.complete,success:b.success,failure:b.failure};return b.complete=this.addCallbackHook(c),b.success=null,b.failure=null,e(a,b),b.complete=c.complete,b.success=c.success,b.failure=c.failure,this}},c}();i.queue=function(){return{elements:[],push:function(a){this.elements.push(a)},pop:function(){return this.elements.pop()},run:function(){var a=this;if(0!=this.elements.length){if("function"==typeof this.elements[0]){var b=this.shift();b()}if(0!=this.elements.length){var c=this.shift();this.elements.length>0&&(c.complete=function(b){b||a.run()}),i(document.getElementById(c.id),c)}}},shift:function(){return this.elements.shift()}}}}(jq),function(a){function b(a){return e[a].el?!0:(delete e[a],!1)}function c(){if(af.os.android&&!af.os.chrome&&af.os.webkit){var c=!1;a.bind(a.touchLayer,["cancel-enter-edit","exit-edit"],function(){if(c){c=!1;for(var a in e)b(a)&&e[a].androidFormsMode&&e[a].stopFormsMode()}})}g=!0}var d=75,e=[],f=function(b){return b.afScrollerId||(b.afScrollerId=a.uuid()),b.afScrollerId};a.fn.scroller=function(b){for(var c,d,g=0;g<this.length;g++)d=f(this[g]),e[d]?c=e[d]:(b||(b={}),a.feat.nativeTouchScroll||(b.useJsScroll=!0),c=h(this[g],b),e[d]=c);return 1==this.length?c:this};var g=!1,h=function(){function b(b,c){var d=document.createElement("div");return d.style.position="absolute",d.style.width=b+"px",d.style.height=c+"px",d.style[a.feat.cssPrefix+"BorderRadius"]="2px",d.style.borderRadius="2px",d.style.display="none",d.className="scrollBar",d.style.background="black",d}var f,h,i=a.feat.cssTransformStart,j=a.feat.cssTransformEnd,k=function(b,d){var e;return!g&&a.touchLayer&&a.isObject(a.touchLayer)?c():a.touchLayer&&a.isObject(a.touchLayer)||(a.touchLayer={}),e="string"==typeof b||b instanceof String?document.getElementById(b):b,e?af.os.desktop?new l(e,d):d.useJsScroll?new f(e,d):new h(e,d):(alert("Could not find element for scroller "+b),void 0)},l=function(b,c){this.el=b,this.afEl=a(this.el);for(var d in c)this[d]=c[d]};return l.prototype={refresh:!1,refreshContent:"Pull to Refresh",refreshHangTimeout:2e3,refreshHeight:60,refreshElement:null,refreshCancelCB:null,refreshRunning:!1,scrollTop:0,scrollLeft:0,preventHideRefresh:!0,verticalScroll:!0,horizontalScroll:!1,refreshTriggered:!1,moved:!1,eventsActive:!1,rememberEventsActive:!1,scrollingLocked:!1,autoEnable:!0,blockFormsFix:!1,loggedPcentY:0,loggedPcentX:0,infinite:!1,infiniteEndCheck:!1,infiniteTriggered:!1,scrollSkip:!1,scrollTopInterval:null,scrollLeftInterval:null,bubbles:!0,lockBounce:!1,_scrollTo:function(a,b){if(b=parseInt(b,10),0===b||isNaN(b))return this.el.scrollTop=Math.abs(a.y),this.el.scrollLeft=Math.abs(a.x),void 0;var c=10,d=(this.el.scrollTop-a.y)/Math.ceil(b/c),e=(this.el.scrollLeft-a.x)/Math.ceil(b/c),f=this,g=Math.ceil(this.el.scrollTop-a.y)/d,h=Math.ceil(this.el.scrollLeft-a.x)/d,i=0,j=0;f.scrollTopInterval=window.setInterval(function(){f.el.scrollTop-=d,j++,j>=g&&(f.el.scrollTop=a.y,clearInterval(f.scrollTopInterval))},c),f.scrollLeftInterval=window.setInterval(function(){f.el.scrollLeft-=e,i++,i>=h&&(f.el.scrollLeft=a.x,clearInterval(f.scrollLeftInterval))},c)},enable:function(){},disable:function(){},hideScrollbars:function(){},addPullToRefresh:function(){},_scrollToTop:function(a){this._scrollTo({x:0,y:0},a)},_scrollToBottom:function(a){this._scrollTo({x:0,y:this.el.scrollHeight-this.el.offsetHeight},a)},scrollToBottom:function(a){return this._scrollToBottom(a)},scrollToTop:function(a){return this._scrollToTop(a)},init:function(b,c){this.el=b,this.afEl=a(this.el),this.defaultProperties();for(var d in c)this[d]=c[d];var f=this,g=function(){f.eventsActive&&f.adjustScroll()};this.afEl.bind("destroy",function(){f.disable(!0);var b=f.el.afScrollerId;e[b]&&delete e[b],a.unbind(a.touchLayer,"orientationchange-reshape",g)}),a.bind(a.touchLayer,"orientationchange-reshape",g)},needsFormsFix:function(b){return this.useJsScroll&&this.isEnabled()&&"none"!=this.el.style.display&&a(b).closest(this.afEl).size()>0},handleEvent:function(a){if(!this.scrollingLocked)switch(a.type){case"touchstart":clearInterval(this.scrollTopInterval),this.preventHideRefresh=!this.refreshRunning,this.moved=!1,this.onTouchStart(a),this.bubbles||a.stopPropagation();break;case"touchmove":this.onTouchMove(a),this.bubbles||a.stopPropagation();break;case"touchend":this.onTouchEnd(a),this.bubbles||a.stopPropagation();break;case"scroll":this.onScroll(a)}},coreAddPullToRefresh:function(b){b&&(this.refreshElement=b);var c;if(null===this.refreshElement){var d=document.getElementById(this.container.id+"_pulldown");c=null!==d?af(d):af("<div id='"+this.container.id+"_pulldown' class='afscroll_refresh' style='border-radius:.6em;border: 1px solid #2A2A2A;background-image: -webkit-gradient(linear,left top,left bottom,color-stop(0,#666666),color-stop(1,#222222));background:#222222;margin:0px;height:60px;position:relative;text-align:center;line-height:60px;color:white;width:100%;'>"+this.refreshContent+"</div>")}else c=af(this.refreshElement);var e=c.get();this.refreshContainer=af('<div style="overflow:hidden;width:100%;height:0;margin:0;padding:0;padding-left:5px;padding-right:5px;display:none;"></div>'),a(this.el).prepend(this.refreshContainer.append(e,"top")),this.refreshContainer=this.refreshContainer[0]},fireRefreshRelease:function(b){if(this.refresh&&b){var c=a.trigger(this,"refresh-release",[b])!==!1;if(this.preventHideRefresh=!1,this.refreshRunning=!0,c){var d=this;this.refreshHangTimeout>0&&(this.refreshCancelCB=setTimeout(function(){d.hideRefresh()},this.refreshHangTimeout))}}},setRefreshContent:function(a){af(this.container).find(".afscroll_refresh").html(a)},lock:function(){this.scrollingLocked||(this.scrollingLocked=!0,this.rememberEventsActive=this.eventsActive,this.eventsActive||this.initEvents())},unlock:function(){this.scrollingLocked&&(this.scrollingLocked=!1,this.rememberEventsActive||this.removeEvents())},scrollToItem:function(b,c){a.is$(b)||(b=a(b));var d,e,f,g;"bottom"==c?(e=b.offset(),d=e.top-this.afEl.offset().bottom+e.height,d+=4):(g=b.offset().top,d=g-document.body.scrollTop,f=this.afEl.offset().top,document.body.scrollTop<f&&(d-=f),d-=4),this.scrollBy({y:d,x:0},0)},setPaddings:function(b,c){var d=a(this.el),e=numOnly(d.css("paddingTop"));d.css("paddingTop",b+"px").css("paddingBottom",c+"px"),this.scrollBy({y:b-e,x:0})},divide:function(a,b){return 0!==b?a/b:0},isEnabled:function(){return this.eventsActive},addInfinite:function(){this.infinite=!0},clearInfinite:function(){this.infiniteTriggered=!1,this.scrollSkip=!0}},f=function(c,d){this.init(c,d),this.container=this.el.parentNode,this.container.afScrollerId=c.afScrollerId,this.afEl=a(this.container),"hidden"!=this.container.style.overflow&&(this.container.style.overflow="hidden"),this.addPullToRefresh(null,!0),this.autoEnable&&this.enable(!0);var e;this.verticalScroll&&this.verticalScroll===!0&&this.scrollBars===!0&&(e=b(5,20),e.style.top="0px",this.vScrollCSS&&(e.className=this.vScrollCSS),e.style.display="none",this.container.appendChild(e),this.vscrollBar=e,e=null),this.horizontalScroll&&this.horizontalScroll===!0&&this.scrollBars===!0&&(e=b(20,5),e.style.bottom="0px",this.hScrollCSS&&(e.className=this.hScrollCSS),e.style.display="none",this.container.appendChild(e),this.hscrollBar=e,e=null),this.horizontalScroll&&(this.el.style["float"]="left"),this.el.hasScroller=!0},h=function(b,c){c.nativeParent&&(b=b.parentNode),this.init(b,c);var d=a(b);if(c.noParent!==!0){var e=d.parent();d.css("height",e.height()).css("width",e.width()),d.insertBefore(d.parent()),e.remove()}this.container=this.el,d.css("-webkit-overflow-scrolling","touch"),c.autoEnable&&this.enable()},h.prototype=new l,f.prototype=new l,h.prototype.defaultProperties=function(){this.refreshContainer=null,this.dY=this.cY=0,this.dX=this.cX=0,this.cancelPropagation=!1,this.loggedPcentY=0,this.loggedPcentX=0;var a=this;this.adjustScrollOverflowProxy_=function(){a.afEl.css("overflow","auto"),a.afEl.parent().css("overflow","hidden")}},h.prototype.enable=function(a){this.eventsActive||(this.eventsActive=!0,this.el.style.overflow="auto",this.el.parentNode.style.overflow="hidden",a||this.adjustScroll(),this.el.addEventListener("touchstart",this,!1),this.el.addEventListener("scroll",this,!1))},h.prototype.disable=function(a){this.eventsActive&&(this.logPos(this.el.scrollLeft,this.el.scrollTop),a||(this.el.style.overflow="hidden"),this.el.removeEventListener("touchstart",this,!1),this.el.removeEventListener("touchmove",this,!1),this.el.removeEventListener("touchend",this,!1),this.el.removeEventListener("scroll",this,!1),this.eventsActive=!1)},h.prototype.addPullToRefresh=function(a,b){this.el.removeEventListener("touchstart",this,!1),this.el.addEventListener("touchstart",this,!1),b||(this.refresh=!0),this.refresh&&this.refresh===!0&&(this.coreAddPullToRefresh(a),this.refreshContainer.style.position="absolute",this.refreshContainer.style.top="-60px",this.refreshContainer.style.height="60px",this.refreshContainer.style.display="block")},h.prototype.onTouchStart=function(a){0===this.el.scrollTop&&(this.el.scrollTop=1),this.el.scrollTop===this.el.scrollHeight-this.el.clientHeight&&(this.el.scrollTop-=1),this.horizontalScroll&&(0===this.el.scrollLeft&&(this.el.scrollLeft=1),this.el.scrollLeft===this.el.scrollWidth-this.el.clientWidth&&(this.el.scrollLeft-=1)),this.refreshCancelCB&&clearTimeout(this.refreshCancelCB),this.el.addEventListener("touchmove",this,!1),this.dY=a.touches[0].pageY,(this.refresh||this.infinite)&&this.refresh&&this.dY<0&&this.showRefresh()},h.prototype.onTouchMove=function(b){var c=b.touches[0].pageY-this.dY,d=b.touches[0].pageX-this.dX;this.hasVertScroll&&this.el.clientHeight==this.el.scrollHeight&&b.preventDefault(),this.hasHorScroll&&this.el.clientWidth==this.el.scrollWidth&&b.preventDefault(),this.moved||(a.trigger(this,"scrollstart",[this.el]),a.trigger(a.touchLayer,"scrollstart",[this.el]),this.el.addEventListener("touchend",this,!1),this.moved=!0),c-this.cY,d-this.cX,this.refresh&&this.el.scrollTop<0?this.showRefresh():this.refreshTriggered&&this.refresh&&this.el.scrollTop>this.refreshHeight&&(this.refreshTriggered=!1,this.refreshCancelCB&&clearTimeout(this.refreshCancelCB),this.hideRefresh(!1),a.trigger(this,"refresh-cancel")),this.cY=c,this.cX=d},h.prototype.showRefresh=function(){this.refreshTriggered||(this.refreshTriggered=!0,a.trigger(this,"refresh-trigger"))},h.prototype.onTouchEnd=function(){var b=this.el.scrollTop<=-this.refreshHeight;this.fireRefreshRelease(b,!0),b&&this.refresh&&(this.refreshContainer.style.position="relative",this.refreshContainer.style.top="0px"),this.dY=this.cY=0,this.el.removeEventListener("touchmove",this,!1),this.el.removeEventListener("touchend",this,!1),this.infiniteEndCheck=!0,this.infinite&&!this.infiniteTriggered&&Math.abs(this.el.scrollTop)>=this.el.scrollHeight-this.el.clientHeight&&(this.infiniteTriggered=!0,a.trigger(this,"infinite-scroll"),this.infiniteEndCheck=!0),this.touchEndFired=!0;var c=200,d=this,e={top:this.el.scrollTop,left:this.el.scrollLeft},f=0;d.nativePolling=setInterval(function(){return f++,f>=c?(clearInterval(d.nativePolling),void 0):((d.el.scrollTop!=e.top||d.el.scrollLeft!=e.left)&&(clearInterval(d.nativePolling),a.trigger(a.touchLayer,"scrollend",[d.el]),a.trigger(d,"scrollend",[d.el])),void 0)},20)},h.prototype.hideRefresh=function(b){if(!this.preventHideRefresh){var c=this,e=function(b){b||(c.el.style[a.feat.cssPrefix+"Transform"]="none",c.el.style[a.feat.cssPrefix+"TransitionProperty"]="none",c.el.scrollTop=0,c.logPos(c.el.scrollLeft,0)),c.refreshContainer.style.top="-60px",c.refreshContainer.style.position="absolute",c.dY=c.cY=0,a.trigger(c,"refresh-finish")};b!==!1&&c.afEl.css3Animate?c.afEl.css3Animate({y:c.el.scrollTop-c.refreshHeight+"px",x:"0%",time:d+"ms",complete:e}):e(),this.refreshTriggered=!1}},h.prototype.hideScrollbars=function(){},h.prototype.scrollTo=function(a,b){return this.logPos(a.x,a.y),a.x*=-1,a.y*=-1,this._scrollTo(a,b)},h.prototype.scrollBy=function(a,b){return a.x+=this.el.scrollLeft,a.y+=this.el.scrollTop,this.logPos(this.el.scrollLeft,this.el.scrollTop),this._scrollTo(a,b)},h.prototype.scrollToBottom=function(a){this._scrollToBottom(a),this.logPos(this.el.scrollLeft,this.el.scrollTop)},h.prototype.onScroll=function(){if(this.infinite&&this.touchEndFired)return this.touchEndFired=!1,void 0;if(this.scrollSkip)return this.scrollSkip=!1,void 0;this.infinite&&!this.infiniteTriggered&&Math.abs(this.el.scrollTop)>=this.el.scrollHeight-this.el.clientHeight&&(this.infiniteTriggered=!0,a.trigger(this,"infinite-scroll"),this.infiniteEndCheck=!0);var b=this;this.infinite&&this.infiniteEndCheck&&this.infiniteTriggered&&(this.infiniteEndCheck=!1,a.trigger(b,"infinite-scroll-end"))},h.prototype.logPos=function(a,b){this.loggedPcentX=this.divide(a,this.el.scrollWidth),this.loggedPcentY=this.divide(b,this.el.scrollHeight),this.scrollLeft=a,this.scrollTop=b,isNaN(this.loggedPcentX)&&(this.loggedPcentX=0),isNaN(this.loggedPcentY)&&(this.loggedPcentY=0)},h.prototype.adjustScroll=function(){this.adjustScrollOverflowProxy_(),this.el.scrollLeft=this.loggedPcentX*this.el.scrollWidth,this.el.scrollTop=this.loggedPcentY*this.el.scrollHeight,this.logPos(this.el.scrollLeft,this.el.scrollTop)},f.prototype.defaultProperties=function(){this.boolScrollLock=!1,this.currentScrollingObject=null,this.elementInfo=null,this.verticalScroll=!0,this.horizontalScroll=!1,this.scrollBars=!0,this.vscrollBar=null,this.hscrollBar=null,this.hScrollCSS="scrollBar",this.vScrollCSS="scrollBar",this.firstEventInfo=null,this.moved=!1,this.preventPullToRefresh=!0,this.isScrolling=!1,this.androidFormsMode=!1,this.refreshSafeKeep=!1,this.lastScrollbar="",this.finishScrollingObject=null,this.container=null,this.scrollingFinishCB=null,this.loggedPcentY=0,this.loggedPcentX=0},f.prototype.enable=function(a){this.eventsActive||(this.eventsActive=!0,a?this.scrollerMoveCSS({x:0,y:0},0):this.adjustScroll(),this.container.addEventListener("touchstart",this,!1),this.container.addEventListener("touchmove",this,!1),this.container.addEventListener("touchend",this,!1))},f.prototype.adjustScroll=function(){var a=this.getViewportSize();this.scrollerMoveCSS({x:Math.round(this.loggedPcentX*(this.el.clientWidth-a.w)),y:Math.round(this.loggedPcentY*(this.el.clientHeight-a.h))},0)},f.prototype.disable=function(){if(this.eventsActive){var a=this.getCSSMatrix(this.el);this.logPos(numOnly(a.e)-numOnly(this.container.scrollLeft),numOnly(a.f)-numOnly(this.container.scrollTop)),this.container.removeEventListener("touchstart",this,!1),this.container.removeEventListener("touchmove",this,!1),this.container.removeEventListener("touchend",this,!1),this.eventsActive=!1}},f.prototype.addPullToRefresh=function(a,b){b||(this.refresh=!0),this.refresh&&this.refresh===!0&&(this.coreAddPullToRefresh(a),this.el.style.overflow="visible")},f.prototype.hideScrollbars=function(){this.hscrollBar&&(this.hscrollBar.style.display="none",this.hscrollBar.style[a.feat.cssPrefix+"TransitionDuration"]="0ms"),this.vscrollBar&&(this.vscrollBar.style.display="none",this.vscrollBar.style[a.feat.cssPrefix+"TransitionDuration"]="0ms")},f.prototype.getViewportSize=function(){var a=window.getComputedStyle(this.container);return isNaN(numOnly(a.paddingTop))&&alert(typeof a.paddingTop+"::"+a.paddingTop+":"),{h:this.container.clientHeight>window.innerHeight?window.innerHeight:this.container.clientHeight-numOnly(a.paddingTop)-numOnly(a.paddingBottom),w:this.container.clientWidth>window.innerWidth?window.innerWidth:this.container.clientWidth-numOnly(a.paddingLeft)-numOnly(a.paddingRight)}},f.prototype.onTouchStart=function(b){if(this.moved=!1,this.currentScrollingObject=null,this.container&&(this.refreshCancelCB&&(clearTimeout(this.refreshCancelCB),this.refreshCancelCB=null),this.scrollingFinishCB&&(clearTimeout(this.scrollingFinishCB),this.scrollingFinishCB=null),1==b.touches.length&&!this.boolScrollLock)){if(b.touches[0].target&&void 0!==b.touches[0].target.type){var c=b.touches[0].target.tagName.toLowerCase();if(b.touches[0].target.type.toLowerCase(),"select"==c)return}var d={top:0,left:0,speedY:0,speedX:0,absSpeedY:0,absSpeedX:0,deltaY:0,deltaX:0,absDeltaY:0,absDeltaX:0,y:0,x:0,duration:0};this.elementInfo={};var e=this.getViewportSize();this.elementInfo.bottomMargin=e.h,this.elementInfo.maxTop=this.el.clientHeight-this.elementInfo.bottomMargin,this.elementInfo.maxTop<0&&(this.elementInfo.maxTop=0),this.elementInfo.divHeight=this.el.clientHeight,this.elementInfo.rightMargin=e.w,this.elementInfo.maxLeft=this.el.clientWidth-this.elementInfo.rightMargin,this.elementInfo.maxLeft<0&&(this.elementInfo.maxLeft=0),this.elementInfo.divWidth=this.el.clientWidth,this.elementInfo.hasVertScroll=this.verticalScroll||this.elementInfo.maxTop>0,this.elementInfo.hasHorScroll=this.elementInfo.maxLeft>0,this.elementInfo.requiresVScrollBar=this.vscrollBar&&this.elementInfo.hasVertScroll,this.elementInfo.requiresHScrollBar=this.hscrollBar&&this.elementInfo.hasHorScroll,this.saveEventInfo(b),this.saveFirstEventInfo(b);var f=this.getCSSMatrix(this.el);d.top=numOnly(f.f)-numOnly(this.container.scrollTop),d.left=numOnly(f.e)-numOnly(this.container.scrollLeft),this.container.scrollTop=this.container.scrollLeft=0,this.currentScrollingObject=this.el,this.refresh&&0===d.top?(this.refreshContainer.style.display="block",this.refreshHeight=this.refreshContainer.firstChild.clientHeight,this.refreshContainer.firstChild.style.top=-this.refreshHeight+"px",this.refreshContainer.style.overflow="visible",this.preventPullToRefresh=!1):d.top<0&&(this.preventPullToRefresh=!0,this.refresh&&(this.refreshContainer.style.overflow="hidden")),d.x=d.left,d.y=d.top,this.setVScrollBar(d,0,0)&&(this.vscrollBar.style.right=this.container.clientWidth>window.innerWidth?"0px":"0px",this.vscrollBar.style[a.feat.cssPrefix+"Transition"]=""),this.setHScrollBar(d,0,0)&&(this.container.clientHeight>window.innerHeight?this.hscrollBar.style.top=window.innerHeight-numOnly(this.hscrollBar.style.height)+"px":this.hscrollBar.style.bottom=numOnly(this.hscrollBar.style.height),this.hscrollBar.style[a.feat.cssPrefix+"Transition"]=""),this.lastScrollInfo=d,this.hasMoved=!1,this.scrollerMoveCSS(this.lastScrollInfo,0)}},f.prototype.getCSSMatrix=function(b){if(this.androidFormsMode){var c=parseInt(b.style.marginTop,10),d=parseInt(b.style.marginLeft,10);return isNaN(c)&&(c=0),isNaN(d)&&(d=0),{f:c,e:d}}var e=a.getCssMatrix(b);return e},f.prototype.saveEventInfo=function(a){this.lastEventInfo={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,time:a.timeStamp}},f.prototype.saveFirstEventInfo=function(a){this.firstEventInfo={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,time:a.timeStamp}},f.prototype.setVScrollBar=function(a,b,c){if(!this.elementInfo.requiresVScrollBar)return!1;var d=parseFloat(this.elementInfo.bottomMargin/this.elementInfo.divHeight)*this.elementInfo.bottomMargin+"px";numOnly(d)>this.elementInfo.bottomMargin&&(d=this.elementInfo.bottomMargin+"px"),d!=this.vscrollBar.style.height&&(this.vscrollBar.style.height=d);var e=this.elementInfo.bottomMargin-numOnly(this.vscrollBar.style.height)-(this.elementInfo.maxTop+a.y)/this.elementInfo.maxTop*(this.elementInfo.bottomMargin-numOnly(this.vscrollBar.style.height));return e>this.elementInfo.bottomMargin&&(e=this.elementInfo.bottomMargin),0>e&&(e=0),this.scrollbarMoveCSS(this.vscrollBar,{x:0,y:e},b,c),!0},f.prototype.setHScrollBar=function(a,b,c){if(!this.elementInfo.requiresHScrollBar)return!1;var d=parseFloat(this.elementInfo.rightMargin/this.elementInfo.divWidth)*this.elementInfo.rightMargin+"px";d!=this.hscrollBar.style.width&&(this.hscrollBar.style.width=d);var e=this.elementInfo.rightMargin-numOnly(this.hscrollBar.style.width)-(this.elementInfo.maxLeft+a.x)/this.elementInfo.maxLeft*(this.elementInfo.rightMargin-numOnly(this.hscrollBar.style.width));return e>this.elementInfo.rightMargin&&(e=this.elementInfo.rightMargin),0>e&&(e=0),this.scrollbarMoveCSS(this.hscrollBar,{x:e,y:0},b,c),!0},f.prototype.onTouchMove=function(b){if(null!==this.currentScrollingObject){var c=this.calculateMovement(b);this.calculateTarget(c),this.lastScrollInfo=c,this.moved||(a.trigger(this,"scrollstart"),a.trigger(a.touchLayer,"scrollstart",[this.el]),this.elementInfo.requiresVScrollBar&&(this.vscrollBar.style.display="block"),this.elementInfo.requiresHScrollBar&&(this.hscrollBar.style.display="block")),this.moved=!0,this.refresh&&0===c.top?(this.refreshContainer.style.display="block",this.refreshHeight=this.refreshContainer.firstChild.clientHeight,this.refreshContainer.firstChild.style.top=-this.refreshHeight+"px",this.refreshContainer.style.overflow="visible",this.preventPullToRefresh=!1):c.top<0&&(this.preventPullToRefresh=!0,this.refresh&&(this.refreshContainer.style.overflow="hidden")),this.saveEventInfo(b),this.isScrolling===!1&&(this.isScrolling=!0,this.onScrollStart&&this.onScrollStart());var d=this.getCSSMatrix(this.el);this.lastScrollInfo.top=numOnly(d.f),this.lastScrollInfo.left=numOnly(d.e),this.recalculateDeltaY(this.lastScrollInfo),this.recalculateDeltaX(this.lastScrollInfo),this.checkYboundary(this.lastScrollInfo),this.elementInfo.hasHorScroll&&this.checkXboundary(this.lastScrollInfo);var e=this.lastScrollInfo.y>0&&this.lastScrollInfo.deltaY>0,f=this.lastScrollInfo.y<-this.elementInfo.maxTop&&this.lastScrollInfo.deltaY<0;if(e||f){var g=e?this.lastScrollInfo.y:-this.lastScrollInfo.y-this.elementInfo.maxTop,h=(this.container.clientHeight-g)/this.container.clientHeight;.5>h&&(h=.5);var i=0;e&&this.lastScrollInfo.top>0||f&&this.lastScrollInfo.top<-this.elementInfo.maxTop?i=this.lastScrollInfo.top:f&&(i=-this.elementInfo.maxTop);var j=this.lastScrollInfo.deltaY*h,k=Math.abs(this.lastScrollInfo.deltaY*h);1>k&&(j=e?1:-1),this.lastScrollInfo.y=i+j}if(this.elementInfo.hasHorScroll&&(e=this.lastScrollInfo.x>0&&this.lastScrollInfo.deltaX>0,f=this.lastScrollInfo.x<-this.elementInfo.maxLeft&&this.lastScrollInfo.deltaX<0,e||f)){var g=e?this.lastScrollInfo.x:-this.lastScrollInfo.x-this.elementInfo.maxLeft,h=(this.container.clientWidth-g)/this.container.clientWidth;.5>h&&(h=.5);var i=0;e&&this.lastScrollInfo.left>0||f&&this.lastScrollInfo.left<-this.elementInfo.maxLeft?i=this.lastScrollInfo.left:f&&(i=-this.elementInfo.maxLeft);var l=this.lastScrollInfo.deltaX*h,m=Math.abs(this.lastScrollInfo.deltaX*h);1>m&&(l=e?1:-1),this.lastScrollInfo.x=i+l}this.lockBounce&&(this.lastScrollInfo.x>0?this.lastScrollInfo.x=0:-1*this.lastScrollInfo.x>this.elementInfo.maxLeft&&(this.lastScrollInfo.x=-1*this.elementInfo.maxLeft),this.lastScrollInfo.y>0?this.lastScrollInfo.y=0:-1*this.lastScrollInfo.y>this.elementInfo.maxTop&&(this.lastScrollInfo.y=-1*this.elementInfo.maxTop)),this.scrollerMoveCSS(this.lastScrollInfo,0),this.setVScrollBar(this.lastScrollInfo,0,0),this.setHScrollBar(this.lastScrollInfo,0,0),this.refresh&&!this.preventPullToRefresh&&(!this.refreshTriggered&&this.lastScrollInfo.top>this.refreshHeight?(this.refreshTriggered=!0,a.trigger(this,"refresh-trigger")):this.refreshTriggered&&this.lastScrollInfo.top<this.refreshHeight&&(this.refreshTriggered=!1,a.trigger(this,"refresh-cancel"))),this.infinite&&!this.infiniteTriggered&&Math.abs(this.lastScrollInfo.top)>=this.el.clientHeight-this.container.clientHeight&&(this.infiniteTriggered=!0,a.trigger(this,"infinite-scroll"))}},f.prototype.calculateMovement=function(a,b){var c={top:0,left:0,speedY:0,speedX:0,absSpeedY:0,absSpeedX:0,deltaY:0,deltaX:0,absDeltaY:0,absDeltaX:0,y:0,x:0,duration:0},d=b?this.firstEventInfo:this.lastEventInfo,e=b?a.pageX:a.touches[0].pageX,f=b?a.pageY:a.touches[0].pageY,g=b?a.time:a.timeStamp;return c.deltaY=this.elementInfo.hasVertScroll?f-d.pageY:0,c.deltaX=this.elementInfo.hasHorScroll?e-d.pageX:0,c.time=g,c.duration=g-d.time,c},f.prototype.calculateTarget=function(a){a.y=this.lastScrollInfo.y+a.deltaY,a.x=this.lastScrollInfo.x+a.deltaX},f.prototype.checkYboundary=function(a){var b=this.container.clientHeight/2,c=this.elementInfo.maxTop+b;if(a.y>b)a.y=b;else{if(!(-a.y>c))return;a.y=-c}this.recalculateDeltaY(a)},f.prototype.checkXboundary=function(a){var b=this.container.clientWidth/2,c=this.elementInfo.maxLeft+b;if(a.x>b)a.x=b;else{if(!(-a.x>c))return;a.x=-c}this.recalculateDeltaX(a)},f.prototype.recalculateDeltaY=function(a){var b=Math.abs(a.deltaY);a.deltaY=a.y-a.top,newAbsDeltaY=Math.abs(a.deltaY),a.duration=a.duration*newAbsDeltaY/b},f.prototype.recalculateDeltaX=function(a){var b=Math.abs(a.deltaX);a.deltaX=a.x-a.left,newAbsDeltaX=Math.abs(a.deltaX),a.duration=a.duration*newAbsDeltaX/b},f.prototype.hideRefresh=function(){var b=this;this.preventHideRefresh||(this.scrollerMoveCSS({x:0,y:0,complete:function(){a.trigger(b,"refresh-finish")}},d),this.refreshTriggered=!1)},f.prototype.setMomentum=function(a){var b=.0012;a.speedY=this.divide(a.deltaY,a.duration),a.speedX=this.divide(a.deltaX,a.duration),a.absSpeedY=Math.abs(a.speedY),a.absSpeedX=Math.abs(a.speedX),a.absDeltaY=Math.abs(a.deltaY),a.absDeltaX=Math.abs(a.deltaX),a.absDeltaY>0?(a.deltaY=(a.deltaY<0?-1:1)*a.absSpeedY*a.absSpeedY/(2*b),a.absDeltaY=Math.abs(a.deltaY),a.duration=a.absSpeedY/b,a.speedY=a.deltaY/a.duration,a.absSpeedY=Math.abs(a.speedY),(a.absSpeedY<100*b||a.absDeltaY<5)&&(a.deltaY=a.absDeltaY=a.duration=a.speedY=a.absSpeedY=0)):a.absDeltaX?(a.deltaX=(a.deltaX<0?-1:1)*a.absSpeedX*a.absSpeedX/(2*b),a.absDeltaX=Math.abs(a.deltaX),a.duration=a.absSpeedX/b,a.speedX=a.deltaX/a.duration,a.absSpeedX=Math.abs(a.speedX),(a.absSpeedX<100*b||a.absDeltaX<5)&&(a.deltaX=a.absDeltaX=a.duration=a.speedX=a.absSpeedX=0)):a.duration=0},f.prototype.onTouchEnd=function(){if(null!==this.currentScrollingObject&&this.moved){this.finishScrollingObject=this.currentScrollingObject,this.currentScrollingObject=null;var b=this.calculateMovement(this.lastEventInfo,!0);this.androidFormsMode||this.setMomentum(b),this.calculateTarget(b);var c=this.getCSSMatrix(this.el);b.top=numOnly(c.f),b.left=numOnly(c.e),this.checkYboundary(b),this.elementInfo.hasHorScroll&&this.checkXboundary(b);var e=!this.preventPullToRefresh&&(b.top>this.refreshHeight||b.y>this.refreshHeight);this.fireRefreshRelease(e,b.top>0),this.refresh&&e?(b.y=this.refreshHeight,b.duration=d):b.y>=0?(b.y=0,b.top>=0&&(b.duration=d)):(-b.y>this.elementInfo.maxTop||0===this.elementInfo.maxTop)&&(b.y=-this.elementInfo.maxTop,-b.top>this.elementInfo.maxTop&&(b.duration=d)),this.elementInfo.hasHorScroll&&(b.x>=0?(b.x=0,b.left>=0&&(b.duration=d)):(-b.x>this.elementInfo.maxLeft||0===this.elementInfo.maxLeft)&&(b.x=-this.elementInfo.maxLeft,-b.left>this.elementInfo.maxLeft&&(b.duration=d))),this.androidFormsMode&&(b.duration=0),this.scrollerMoveCSS(b,b.duration,"cubic-bezier(0.33,0.66,0.66,1)"),this.setVScrollBar(b,b.duration,"cubic-bezier(0.33,0.66,0.66,1)"),this.setHScrollBar(b,b.duration,"cubic-bezier(0.33,0.66,0.66,1)"),this.setFinishCalback(b.duration),this.infinite&&!this.infiniteTriggered&&Math.abs(b.y)>=this.el.clientHeight-this.container.clientHeight&&(this.infiniteTriggered=!0,a.trigger(this,"infinite-scroll"))}},f.prototype.setFinishCalback=function(b){var c=this;this.scrollingFinishCB=setTimeout(function(){c.hideScrollbars(),a.trigger(a.touchLayer,"scrollend",[c.el]),a.trigger(c,"scrollend",[c.el]),c.isScrolling=!1,c.elementInfo=null,c.infinite&&a.trigger(c,"infinite-scroll-end")},b)},f.prototype.startFormsMode=function(){if(!this.blockFormsFix){var b=this.getCSSMatrix(this.el);this.refreshSafeKeep=this.refresh,this.refresh=!1,this.androidFormsMode=!0,this.el.style[a.feat.cssPrefix+"Transform"]="none",this.el.style[a.feat.cssPrefix+"Transition"]="none",this.el.style[a.feat.cssPrefix+"Perspective"]="none",this.scrollerMoveCSS({x:numOnly(b.e),y:numOnly(b.f)},0),this.container.style[a.feat.cssPrefix+"Perspective"]="none",this.container.style[a.feat.cssPrefix+"BackfaceVisibility"]="visible",this.vscrollBar&&(this.vscrollBar.style[a.feat.cssPrefix+"Transform"]="none",this.vscrollBar.style[a.feat.cssPrefix+"Transition"]="none",this.vscrollBar.style[a.feat.cssPrefix+"Perspective"]="none",this.vscrollBar.style[a.feat.cssPrefix+"BackfaceVisibility"]="visible"),this.hscrollBar&&(this.hscrollBar.style[a.feat.cssPrefix+"Transform"]="none",this.hscrollBar.style[a.feat.cssPrefix+"Transition"]="none",this.hscrollBar.style[a.feat.cssPrefix+"Perspective"]="none",this.hscrollBar.style[a.feat.cssPrefix+"BackfaceVisibility"]="visible")
}},f.prototype.stopFormsMode=function(){if(!this.blockFormsFix){var b=this.getCSSMatrix(this.el);this.refresh=this.refreshSafeKeep,this.androidFormsMode=!1,this.el.style[a.feat.cssPrefix+"Perspective"]=1e3,this.el.style.marginTop=0,this.el.style.marginLeft=0,this.el.style[a.feat.cssPrefix+"Transition"]="0ms linear",this.scrollerMoveCSS({x:numOnly(b.e),y:numOnly(b.f)},0),this.container.style[a.feat.cssPrefix+"Perspective"]=1e3,this.container.style[a.feat.cssPrefix+"BackfaceVisibility"]="hidden",this.vscrollBar&&(this.vscrollBar.style[a.feat.cssPrefix+"Perspective"]=1e3,this.vscrollBar.style[a.feat.cssPrefix+"BackfaceVisibility"]="hidden"),this.hscrollBar&&(this.hscrollBar.style[a.feat.cssPrefix+"Perspective"]=1e3,this.hscrollBar.style[a.feat.cssPrefix+"BackfaceVisibility"]="hidden")}},f.prototype.scrollerMoveCSS=function(b,c,d){c||(c=0),d||(d="linear"),c=numOnly(c),this.el&&this.el.style&&(this.eventsActive&&(this.androidFormsMode?(this.el.style.marginTop=Math.round(b.y)+"px",this.el.style.marginLeft=Math.round(b.x)+"px"):(this.el.style[a.feat.cssPrefix+"Transform"]="translate"+i+b.x+"px,"+b.y+"px"+j,this.el.style[a.feat.cssPrefix+"TransitionDuration"]=c+"ms",this.el.style[a.feat.cssPrefix+"TransitionTimingFunction"]=d)),this.logPos(b.x,b.y))},f.prototype.logPos=function(a,b){var c;c=this.elementInfo?{h:this.elementInfo.bottomMargin,w:this.elementInfo.rightMargin}:this.getViewportSize(),this.loggedPcentX=this.divide(a,this.el.clientWidth-c.w),this.loggedPcentY=this.divide(b,this.el.clientHeight-c.h),this.scrollTop=b,this.scrollLeft=a},f.prototype.scrollbarMoveCSS=function(b,c,d,e){d||(d=0),e||(e="linear"),b&&b.style&&(this.androidFormsMode?(b.style.marginTop=Math.round(c.y)+"px",b.style.marginLeft=Math.round(c.x)+"px"):(b.style[a.feat.cssPrefix+"Transform"]="translate"+i+c.x+"px,"+c.y+"px"+j,b.style[a.feat.cssPrefix+"TransitionDuration"]=d+"ms",b.style[a.feat.cssPrefix+"TransitionTimingFunction"]=e))},f.prototype.scrollTo=function(a,b){b||(b=0),this.scrollerMoveCSS(a,b)},f.prototype.scrollBy=function(a,b){var c=this.getCSSMatrix(this.el),d=numOnly(c.f),e=numOnly(c.e);this.scrollTo({y:d-a.y,x:e-a.x},b)},f.prototype.scrollToBottom=function(a){this.scrollTo({y:-1*(this.el.clientHeight-this.container.clientHeight),x:0},a)},f.prototype.scrollToTop=function(a){this.scrollTo({x:0,y:0},a)},k}()}(af),function(a){a.fn.popup=function(a){return new c(this[0],a)};var b=[],c=function(){var c=function(c,d){if(this.container="string"==typeof c||c instanceof String?document.getElementById(c):c,!this.container)return alert("Error finding container for popup "+c),void 0;try{("string"==typeof d||"number"==typeof d)&&(d={message:d,cancelOnly:"true",cancelText:"OK"}),this.id=id=d.id=d.id||a.uuid(),this.title=d.suppressTitle?"":d.title||"",this.message=d.message||"",this.cancelText=d.cancelText||"取消",this.cancelCallback=d.cancelCallback||function(){},this.cancelClass=d.cancelClass||"button",this.doneText=d.doneText||"确定",this.doneCallback=d.doneCallback||function(){},this.doneClass=d.doneClass||"button",this.cancelOnly=d.cancelOnly||!1,this.onShow=d.onShow||function(){},this.autoCloseDone=void 0!==d.autoCloseDone?d.autoCloseDone:!0,b.push(this),1==b.length&&this.show()}catch(e){console.log("error adding popup "+e)}};return c.prototype={id:null,title:null,message:null,cancelText:null,cancelCallback:null,cancelClass:null,doneText:null,doneCallback:null,doneClass:null,cancelOnly:!1,onShow:null,autoCloseDone:!0,supressTitle:!1,show:function(){var b=this,c='<div id="'+this.id+'" class="jqPopup hidden">'+"<header>"+this.title+"</header>"+'<div><div style="width:1px;height:1px;-webkit-transform:translate3d(0,0,0);float:right"></div>'+this.message+"</div>"+'<footer style="clear:both;">'+'<a href="javascript:;" class="'+this.cancelClass+'" id="cancel">'+this.cancelText+"</a>"+'<a href="javascript:;" class="'+this.doneClass+'" id="action">'+this.doneText+"</a>"+"</footer>"+"</div></div>";a(this.container).append(a(c));var d=a("#"+this.id);d.bind("close",function(){b.hide()}),this.cancelOnly&&(d.find("A#action").hide(),d.find("A#cancel").addClass("center")),d.find("A").each(function(){var c=a(this);c.bind("click",function(a){"cancel"==c.attr("id")?(b.cancelCallback.call(b.cancelCallback,b),b.hide()):(b.doneCallback.call(b.doneCallback,b),b.autoCloseDone&&b.hide()),a.preventDefault()})}),b.positionPopup(),a.blockUI(.5),d.removeClass("hidden"),d.bind("orientationchange",function(){b.positionPopup()}),d.find("header").show(),d.find("footer").show(),this.onShow(this)},hide:function(){var b=this;a("#"+b.id).addClass("hidden"),a.unblockUI(),setTimeout(function(){b.remove()},250)},remove:function(){var c=this,d=a("#"+c.id);d.unbind("close"),d.find("BUTTON#action").unbind("click"),d.find("BUTTON#cancel").unbind("click"),d.unbind("orientationchange").remove(),b.splice(0,1),b.length>0&&b[0].show()},positionPopup:function(){var b=a("#"+this.id);b.css("top",window.innerHeight/2.5+window.pageYOffset-b[0].clientHeight/2+"px"),b.css("left",window.innerWidth/2-b[0].clientWidth/2+"px")}},c}(),d=!1;a.blockUI=function(b){d||(b=b?" style='opacity:"+b+";'":"",a("BODY").prepend(a("<div id='mask'"+b+"></div>")),a("BODY DIV#mask").bind("touchstart",function(a){a.preventDefault()}),a("BODY DIV#mask").bind("touchmove",function(a){a.preventDefault()}),d=!0)},a.unblockUI=function(){d=!1,a("BODY DIV#mask").unbind("touchstart"),a("BODY DIV#mask").unbind("touchmove"),a("BODY DIV#mask").remove()},window.alert=function(b){(null===b||void 0===b)&&(b="null"),a("#jQUi").length>0?a("#jQUi").popup(b.toString()):a(document.body).popup(b.toString())}}(jq),function(a){a.fn.actionsheet=function(a){for(var c,d=0;d<this.length;d++)c=new b(this[d],a);return 1==this.length?c:this};var b=function(){var b=function(c,d){if(this.el="string"==typeof c||c instanceof String?document.getElementById(c):c,!this.el)return alert("Could not find element for actionsheet "+c),void 0;if(!(this instanceof b))return new b(c,d);if("object"==typeof d)for(j in d)this[j]=d[j];try{var e,f=this,g='<div id="jq_actionsheet"><div style="width:100%">',h="</div></div>";if("string"==typeof d)e=a(g+d+"<a href='javascript:;' class='cancel'>Cancel</a>"+h);else if("object"==typeof d){e=a(g+h);var i=a(e.children().get());d.push({text:"Cancel",cssClasses:"cancel"});for(var k=0;k<d.length;k++){var l=a('<a href="javascript:;" >'+(d[k].text||"TEXT NOT ENTERED")+"</a>");l[0].onclick=d[k].handler||function(){},d[k].cssClasses&&d[k].cssClasses.length>0&&l.addClass(d[k].cssClasses),i.append(l)}}a(c).find("#jq_actionsheet").remove(),a(c).find("#jq_action_mask").remove(),actionsheetEl=a(c).append(e),e.get().style[a.feat.cssPrefix+"Transition"]="all 0ms",e.css(a.feat.cssPrefix+"Transform","translate"+a.feat.cssTransformStart+"0,0"+a.feat.cssTransformEnd),e.css("top",window.innerHeight+"px"),this.el.style.overflow="hidden",e.on("click","a",function(){f.hideSheet()}),this.activeSheet=e,a(c).append('<div id="jq_action_mask" style="position:absolute;top:0px;left:0px;right:0px;bottom:0px;z-index:9998;background:rgba(0,0,0,.4)"/>'),setTimeout(function(){e.get().style[a.feat.cssPrefix+"Transition"]="all 300ms",e.css(a.feat.cssPrefix+"Transform","translate"+a.feat.cssTransformStart+"0,"+-e.height()+"px"+a.feat.cssTransformEnd)},10)}catch(m){alert("error adding actionsheet"+m)}};return b.prototype={activeSheet:null,hideSheet:function(){var b=this;this.activeSheet.off("click","a",function(){b.hideSheet()}),a(this.el).find("#jq_action_mask").remove(),this.activeSheet.get().style[a.feat.cssPrefix+"Transition"]="all 0ms";var c=this.activeSheet,d=this.el;setTimeout(function(){c.get().style[a.feat.cssPrefix+"Transition"]="all 300ms",c.css(a.feat.cssPrefix+"Transform","translate"+a.feat.cssTransformStart+"0,0px"+a.feat.cssTransformEnd),setTimeout(function(){c.remove(),c=null,d.style.overflow="none"},500)},10)}},b}()}(jq),function(a){a.passwordBox=function(){return new b};var b=function(){this.oldPasswords={}};b.prototype={showPasswordPlainText:!1,getOldPasswords:function(b){var c=b&&document.getElementById(b)?document.getElementById(b):document;if(!c)return alert("Could not find container element for passwordBox "+b),void 0;for(var d=c.getElementsByTagName("input"),e=0;e<d.length;e++)"password"==d[e].type&&a.os.webkit&&(d[e].type="text",d[e].style["-webkit-text-security"]="disc")},changePasswordVisiblity:function(b,c){b=parseInt(b);var d=document.getElementById(c);d.style[a.cssPrefix+"text-security"]=1==b?"none":"disc",a.os.webkit||(d.type=1==b?"text":"password"),d=null}}}(jq),function(a){a.selectBox={scroller:null,getOldSelects:function(b){if(a.os.android&&!a.os.androidICS){if(!a.fn.scroller)return alert("This library requires jq.web.Scroller"),void 0;var c=b&&document.getElementById(b)?document.getElementById(b):document;if(!c)return alert("Could not find container element for jq.web.selectBox "+b),void 0;for(var d=c.getElementsByTagName("select"),e=this,f=0;f<d.length;f++)d[f].hasSelectBoxFix||function(b){var c=document.createElement("div"),g=window.getComputedStyle(b),h="intrinsic"==g.width?"100%":g.width,i=parseInt(h)>0?h:"100px",j=parseInt(b.style.height)>0?b.style.height:parseInt(g.height)?g.height:"20px";c.style.width=i,c.style.height=j,c.style.margin=g.margin,c.style.position=g.position,c.style.left=g.left,c.style.top=g.top,c.style.lineHeight=g.lineHeight,c.style.zIndex="1",b.value&&(c.innerHTML=b.options[b.selectedIndex].text),c.style.background="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAeCAIAAABFWWJ4AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkM1NjQxRUQxNUFEODExRTA5OUE3QjE3NjI3MzczNDAzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkM1NjQxRUQyNUFEODExRTA5OUE3QjE3NjI3MzczNDAzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QzU2NDFFQ0Y1QUQ4MTFFMDk5QTdCMTc2MjczNzM0MDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QzU2NDFFRDA1QUQ4MTFFMDk5QTdCMTc2MjczNzM0MDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6YWbdCAAAAlklEQVR42mIsKChgIBGwAHFPTw/xGkpKSlggrG/fvhGjgYuLC0gyMZAOoPb8//9/0Or59+8f8XrICQN66SEnDOgcp3AgKiqKqej169dY9Hz69AnCuHv3rrKyMrIKoAhcVlBQELt/gIqwstHD4B8quH37NlAQSKKJEwg3iLbBED8kpeshoGcwh5uuri5peoBFMEluAwgwAK+5aXfuRb4gAAAAAElFTkSuQmCC') right top no-repeat",c.style.backgroundColor="white",c.style.lineHeight=j,c.style.backgroundSize="contain",c.className="jqmobiSelect_fakeInput "+b.className,c.id=b.id+"_jqmobiSelect",c.style.border="1px solid gray",c.style.color="black",c.linkId=b.id,c.onclick=function(){e.initDropDown(this.linkId)},a(c).insertBefore(a(b)),b.style.display="none",b.style.webkitAppearance="none";for(var k=0;k<b.options.length;k++)b.options[k].selected&&(c.value=b.options[k].text),b.options[k].watch("selected",function(a,c,d){return 1==d&&(b.getAttribute("multiple")||e.updateMaskValue(this.parentNode.id,this.text,this.value),this.parentNode.value=this.value),d});b.watch("selectedIndex",function(a,c,d){return this.options[d]&&(b.getAttribute("multiple")||e.updateMaskValue(this.id,this.options[d].text,this.options[d].value),this.value=this.options[d].value),d}),c=null,imageMask=null,d[f].hasSelectBoxFix=!0}(d[f]);e.createHtml()}},updateDropdown:function(a){var b=document.getElementById(a);if(b){for(var c=0;c<b.options.length;c++)b.options[c].selected&&(fakeInput.value=b.options[c].text),b.options[c].watch("selected",function(a,b,c){return 1==c&&(that.updateMaskValue(this.parentNode.id,this.text,this.value),this.parentNode.value=this.value),c});b=null}},initDropDown:function(a){var b=this,c=document.getElementById(a);if(!c.disabled&&c&&c.options&&0!=c.options.length){var d=a,e="",f=0;e=c.attributes.title||c.name,"object"==typeof e&&(e=e.value),document.getElementById("jqmobiSelectBoxScroll").innerHTML="",document.getElementById("jqmobiSelectBoxHeaderTitle").innerHTML=e.length>0?e:d;for(var g=0;g<c.options.length;g++){c.options[g].watch("selected",function(a,c,d){return 1==d&&(b.updateMaskValue(this.parentNode.id,this.text,this.value),this.parentNode.value=this.value),d});var h=c.options[g].selected?!0:!1,i=document.createElement("div"),j=document.createElement("a"),k=document.createElement("span"),l=document.createElement("button");i.className="jqmobiSelectRow",i.style.cssText="line-height:40px;font-size:14px;padding-left:10px;height:40px;width:100%;position:relative;width:100%;border-bottom:1px solid black;background:white;",i.tmpValue=g,i.onclick=function(){b.setDropDownValue(a,this.tmpValue,this)},j.style.cssText="text-decoration:none;color:black;",j.innerHTML=c.options[g].text,j.className="jqmobiSelectRowText",k.style.cssText="float:right;margin-right:20px;margin-top:-2px",h?(l.style.cssText="background: #000;padding: 0px 0px;border-radius:15px;border:3px solid black;",l.className="jqmobiSelectRowButtonFound"):(l.style.cssText="background: #ffffff;padding: 0px 0px;border-radius:15px;border:3px solid black;",l.className="jqmobiSelectRowButton"),l.style.width="20px",l.style.height="20px",l.checked=h,k.appendChild(l),i.appendChild(j),i.appendChild(k),document.getElementById("jqmobiSelectBoxScroll").appendChild(i),k=null,l=null,j=null}try{document.getElementById("jqmobiSelectModal").style.display="block"}catch(m){console.log("Error showing div "+m)}try{if(i){var n=numOnly(i.style.height),o=numOnly(document.getElementById("jqmobiSelectBoxHeader").style.height);if(f*n+o>=numOnly(document.getElementById("jqmobiSelectBoxFix").clientHeight)-o)var p=f*-n+o;else p=0;this.scroller.scrollTo({x:0,y:p})}}catch(m){console.log("error init dropdown"+m)}i=null,c=null}},updateMaskValue:function(a,b,c){var d=document.getElementById(a+"_jqmobiSelect"),e=document.getElementById(a);d&&(d.innerHTML=b),"function"==typeof e.onchange&&e.onchange(c),d=null,e=null},setDropDownValue:function(b,c,d){var e=document.getElementById(b);if(e){if(e.getAttribute("multiple")){var f=a(e).find("option:nth-child("+(c+1)+")").get(0);f.selected?(f.selected=!1,a(d).find("button").css("background","#fff")):(f.selected=!0,a(d).find("button").css("background","#000"))}else e.selectedIndex=c,a(e).find("option").forEach(function(a){a.selected=!1}),a(e).find("option:nth-child("+(c+1)+")").get(0).selected=!0,this.scroller.scrollTo({x:0,y:0}),this.hideDropDown();a(e).trigger("change"),e=null}},hideDropDown:function(){document.getElementById("jqmobiSelectModal").style.display="none",document.getElementById("jqmobiSelectBoxScroll").innerHTML=""},createHtml:function(){var b=this;if(!document.getElementById("jqmobiSelectBoxContainer")){var c=document.createElement("div");c.style.cssText="position:absolute;top:0px;bottom:0px;left:0px;right:0px;background:rgba(0,0,0,.7);z-index:200000;display:none;",c.id="jqmobiSelectModal";var d=document.createElement("div");d.id="jqmobiSelectBoxContainer",d.style.cssText="position:absolute;top:8%;bottom:10%;display:block;width:90%;margin:auto;margin-left:5%;height:90%px;background:white;color:black;border:1px solid black;border-radius:6px;",d.innerHTML='<div id="jqmobiSelectBoxHeader" style="display:block;font-family:\'Eurostile-Bold\', Eurostile, Helvetica, Arial, sans-serif;color:#fff;font-weight:bold;font-size:18px;line-height:34px;height:34px; text-transform:uppercase; text-align:left; text-shadow:rgba(0,0,0,.9) 0px -1px 1px; padding: 0px 8px 0px 8px; border-top-left-radius:5px; border-top-right-radius:5px; -webkit-border-top-left-radius:5px; -webkit-border-top-right-radius:5px; background:#39424b; margin:1px;"><div style="float:left;" id="jqmobiSelectBoxHeaderTitle"></div><div style="float:right;width:60px;margin-top:-5px"><div id="jqmobiSelectClose" class="button" style="width:60px;height:32px;line-height:32px;">Close</div></div></div><div id="jqmobiSelectBoxFix" style="position:relative;height:90%;background:white;overflow:hidden;width:100%;"><div id="jqmobiSelectBoxScroll"></div></div>';var b=this;c.appendChild(d),a(document).ready(function(){jq("#jQUi")?jq("#jQUi").append(c):document.body.appendChild(c);var e=a("#jqmobiSelectClose").get();e.onclick=function(){b.hideDropDown()};var f=a("<style>.jqselectscrollBarV{opacity:1 !important;}</style>").get();document.body.appendChild(f);try{b.scroller=a("#jqmobiSelectBoxScroll").scroller({scroller:!1,verticalScroll:!0,vScrollCSS:"jqselectscrollBarV"})}catch(g){console.log("Error creating select html "+g)}c=null,d=null,f=null})}}},HTMLElement.prototype.watch||(HTMLElement.prototype.watch=function(a,b){var c=this[a],d=c,e=function(){return d},f=function(e){return c=d,d=b.call(this,a,c,e)};delete this[a]&&(HTMLElement.defineProperty?HTMLElement.defineProperty(this,a,{get:e,set:f,enumerable:!1,configurable:!0}):HTMLElement.prototype.__defineGetter__&&HTMLElement.prototype.__defineSetter__&&(HTMLElement.prototype.__defineGetter__.call(this,a,e),HTMLElement.prototype.__defineSetter__.call(this,a,f)))}),HTMLElement.prototype.unwatch||(HTMLElement.prototype.unwatch=function(a){var b=this[a];delete this[a],this[a]=b})}(jq),function(a){function b(a){return"tagName"in a?a:a.parentNode}function c(a,b,c,d){var e=Math.abs(a-b),f=Math.abs(c-d);return e>=f?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function d(){g.last&&Date.now()-g.last>=h&&(g.el.trigger("longTap"),g={})}var e,f,g={},h=750;a(document).ready(function(){var i;a(document.body).bind("touchstart",function(c){if(c.touches&&0!=c.touches.length){var j=Date.now(),k=j-(g.last||j);c.touches&&0!=c.touches.length&&(g.el=a(b(c.touches[0].target)),e&&clearTimeout(e),g.x1=c.touches[0].pageX,g.y1=c.touches[0].pageY,g.x2=g.y2=0,k>0&&250>=k&&(g.isDoubleTap=!0),g.last=j,f=setTimeout(d,h),g.el.data("ignore-pressed")||g.el.addClass("selected"),i&&!i.data("ignore-pressed")&&i.removeClass("selected"),i=g.el)}}).bind("touchmove",function(a){g.x2=a.touches[0].pageX,g.y2=a.touches[0].pageY,clearTimeout(f)}).bind("touchend",function(){g.el&&(g.el.data("ignore-pressed")||g.el.removeClass("selected"),g.isDoubleTap?(g.el.trigger("doubleTap"),g={}):g.x2>0||g.y2>0?((Math.abs(g.x1-g.x2)>25||Math.abs(g.y1-g.y2)>25)&&g.el.trigger("swipe")&&g.el.trigger("swipe"+c(g.x1,g.x2,g.y1,g.y2)),g.x1=g.x2=g.y1=g.y2=g.last=0):"last"in g&&(g.el.trigger("tap"),e=setTimeout(function(){e=null,g.el&&g.el.trigger("singleTap"),g={}},250)))}).bind("touchcancel",function(){g.el&&!g.el.data("ignore-pressed")&&g.el.removeClass("selected"),g={},clearTimeout(f)})}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(b){a.fn[b]=function(a){return this.bind(b,a)}})}(jq),function(a){a.touchLayer=function(b){return a.touchLayer=new k(b),a.touchLayer};var b=["input","select","textarea"],c=["button","radio","checkbox","range","date"],d=a.os.ios,e=a.os.blackberry,f=a.os.blackberry||a.os.android&&!a.os.chrome;a.os.blackberry||a.os.android&&!a.os.chrome,a.os.ios,a.os.blackberry10;var g=a.os.ios,h=.97,i=2,j=!1,k=function(b){this.clearTouchVars(),b.addEventListener("touchstart",this,!1),b.addEventListener("touchmove",this,!1),b.addEventListener("touchend",this,!1),b.addEventListener("click",this,!1),b.addEventListener("focusin",this,!1),document.addEventListener("scroll",this,!1),window.addEventListener("resize",this,!1),window.addEventListener("orientationchange",this,!1),this.layer=b,this.scrollEndedProxy_=a.proxy(this.scrollEnded,this),this.exitEditProxy_=a.proxy(this.exitExit,this,[]),this.launchFixUIProxy_=a.proxy(this.launchFixUI,this);var c=this;this.scrollTimeoutExpireProxy_=function(){c.scrollTimeout_=null,c.scrollTimeoutEl_.addEventListener("scroll",c.scrollEndedProxy_,!1)},this.retestAndFixUIProxy_=function(){jq.os.android&&(c.layer.style.height="100%"),a.asap(c.testAndFixUI,c,arguments)},document.addEventListener("click",function(a){void 0!==a.clientX&&null!=c.lastTouchStartX&&2>Math.abs(c.lastTouchStartX-a.clientX)&&2>Math.abs(c.lastTouchStartY-a.clientY)&&(a.preventDefault(),a.stopPropagation())},!0),a.bind(this,"scrollstart",function(a){c.isScrolling=!0,c.scrollingEl_=a,c.fireEvent("UIEvents","scrollstart",a,!1,!1)}),a.bind(this,"scrollend",function(a){c.isScrolling=!1,c.fireEvent("UIEvents","scrollend",a,!1,!1)}),this.launchFixUI(5)};k.prototype={dX:0,dY:0,cX:0,cY:0,touchStartX:null,touchStartY:null,layer:null,scrollingEl_:null,scrollTimeoutEl_:null,scrollTimeout_:null,reshapeTimeout_:null,scrollEndedProxy_:null,exitEditProxy_:null,launchFixUIProxy_:null,reHideAddressBarTimeout_:null,retestAndFixUIProxy_:null,panElementId:"header",blockClicks:!1,allowDocumentScroll_:!1,ignoreNextResize_:!1,blockPossibleClick_:!1,isScrolling:!1,isScrollingVertical_:!1,wasPanning_:!1,isPanning_:!1,isFocused_:!1,justBlurred_:!1,requiresNativeTap:!1,holdingReshapeType_:null,handleEvent:function(a){switch(a.type){case"touchstart":this.onTouchStart(a);break;case"touchmove":this.onTouchMove(a);break;case"touchend":this.onTouchEnd(a);break;case"click":this.onClick(a);break;case"blur":this.onBlur(a);break;case"scroll":this.onScroll(a);break;case"orientationchange":this.onOrientationChange(a);break;case"resize":this.onResize(a);break;case"focusin":this.onFocusIn(a)}},launchFixUI:function(a){return a||(a=i),null==this.reHideAddressBarTimeout_?this.testAndFixUI(0,a):void 0},resetFixUI:function(){this.reHideAddressBarTimeout_&&clearTimeout(this.reHideAddressBarTimeout_),this.reHideAddressBarTimeout_=null},testAndFixUI:function(a,b){var c=this.getReferenceHeight(),d=this.getCurrentHeight();return c==d||c>d*h&&d>c*h?(jq.os.android&&this.resetFixUI(),!1):(this.hideAddressBar(a,b),!0)},hideAddressBar:function(a,b){if(a>=b)return this.resetFixUI(),void 0;if(jq.os.desktop||jq.os.chrome)this.layer.style.height="100%";else if(jq.os.android){window.scrollTo(1,1),this.layer.style.height=this.isFocused_||window.innerHeight>window.outerHeight?window.innerHeight+"px":window.outerHeight/window.devicePixelRatio+"px",that=this;var c=a+1;this.reHideAddressBarTimeout_=setTimeout(this.retestAndFixUIProxy_,250*c,[c,b])}else this.isFocused_||(document.documentElement.style.height="5000px",window.scrollTo(0,0),document.documentElement.style.height=window.innerHeight+"px",this.layer.style.height=window.innerHeight+"px")},getReferenceHeight:function(){return jq.os.android?Math.ceil(window.outerHeight/window.devicePixelRatio):window.innerHeight},getCurrentHeight:function(){return jq.os.android?window.innerHeight:numOnly(document.documentElement.style.height)},onOrientationChange:function(){!this.holdingReshapeType_&&this.reshapeTimeout_?this.fireReshapeEvent("orientationchange"):this.previewReshapeEvent("orientationchange")},onResize:function(){return this.ignoreNextResize_?(this.ignoreNextResize_=!1,void 0):(this.launchFixUI()&&this.reshapeAction(),void 0)},onClick:function(e){var f=e.target&&void 0!=e.target.tagName?e.target.tagName.toLowerCase():"";if(-1===b.indexOf(f)||this.isFocused_&&!e.target!=this.focusedElement)a.os.blackberry10&&this.isFocused_&&this.focusedElement.blur();else{var g=e.target&&void 0!=e.target.type?e.target.type.toLowerCase():"",h=-1!==c.indexOf(g);if(h)this.isFocused_=!1;else{if(this.isFocused_&&this.focusedElement.removeEventListener("blur",this,!1),this.focusedElement=e.target,this.focusedElement.addEventListener("blur",this,!1),!this.isFocused_&&!this.justBlurred_)if(a.trigger(this,"enter-edit",[e.target]),a.os.ios){var i=this;setTimeout(function(){i.fireReshapeEvent("enter-edit")},300)}else this.previewReshapeEvent("enter-edit");this.isFocused_=!0}this.justBlurred_=!1,this.allowDocumentScroll_=!0,d&&e.target.focus()}},previewReshapeEvent:function(a){that=this,this.reshapeTimeout_=setTimeout(function(){that.fireReshapeEvent(a),that.reshapeTimeout_=null,that.holdingReshapeType_=null},750),this.holdingReshapeType_=a},fireReshapeEvent:function(b){a.trigger(this,"reshape"),a.trigger(this,b?b+"-reshape":"unknown-reshape")},reshapeAction:function(){this.reshapeTimeout_?(clearTimeout(this.reshapeTimeout_),this.fireReshapeEvent(this.holdingReshapeType_),this.holdingReshapeType_=null,this.reshapeTimeout_=null):this.previewReshapeEvent()},onFocusIn:function(a){this.isFocused_||this.onClick(a)},onBlur:function(b){jq.os.android&&b.target==window||(this.isFocused_=!1,this.focusedElement&&this.focusedElement.removeEventListener("blur",this,!1),this.focusedElement=null,this.justBlurred_=!0,a.asap(this.exitEditProxy_,this,[b.target]))},exitExit:function(b){if(this.justBlurred_=!1,!this.isFocused_)if(a.trigger(this,"exit-edit",[b]),this.allowDocumentScroll_=!1,a.os.ios){var c=this;setTimeout(function(){c.fireReshapeEvent("exit-edit")},300)}else this.previewReshapeEvent("exit-edit")},onScroll:function(a){this.allowDocumentScroll_||this.isPanning_||a.target!=document||(this.allowDocumentScroll_=!0,this.wasPanning_?(this.wasPanning_=!1,setTimeout(this.launchFixUIProxy_,2e3,[i])):this.launchFixUI())},onTouchStart:function(c){this.dX=c.touches[0].pageX,this.dY=c.touches[0].pageY,this.lastTimestamp=c.timeStamp,this.lastTouchStartX=this.lastTouchStartY=null,(g||a.feat.nativeTouchScroll)&&this.checkDOMTree(c.target,this.layer),this.isScrolling&&(null!=this.scrollTimeout_?(clearTimeout(this.scrollTimeout_),this.scrollTimeout_=null,this.scrollTimeoutEl_!=this.scrollingEl_?this.scrollEnded(!1):this.blockPossibleClick_=!0):this.scrollTimeoutEl_&&(this.scrollEnded(!0),this.blockPossibleClick_=!0));var d=jq.os.android&&c&&c.target&&c.target.getAttribute&&"ignore"==c.target.getAttribute("data-touchlayer");if(d||this.isFocused_&&!a.os.blackberry10)this.requiresNativeTap=!0,this.allowDocumentScroll_=!0;else if(f&&c.target&&void 0!=c.target.tagName){var e=c.target.tagName.toLowerCase();-1!==b.indexOf(e)&&("select"!=e&&a.trigger(this,"pre-enter-edit",[c.target]),this.requiresNativeTap=!0)}else c.target&&void 0!==c.target.tagName&&"input"==c.target.tagName.toLowerCase()&&"range"==c.target.type&&(this.requiresNativeTap=!0);this.isPanning_||this.requiresNativeTap?this.isScrollingVertical_&&this.demandVerticalScroll():(this.isScrolling&&!a.feat.nativeTouchScroll||!this.isScrolling)&&c.preventDefault()},demandVerticalScroll:function(){var a=this.scrollingEl_.scrollTop<=0;if(a)this.scrollingEl_.scrollTop=1;else{var b=this.scrollingEl_.scrollTop+this.scrollingEl_.clientHeight,c=b>=this.scrollingEl_.scrollHeight;c&&(this.scrollingEl_.scrollTop=this.scrollingEl_.scrollHeight-this.scrollingEl_.clientHeight-1)}},ignoreScrolling:function(a){return void 0===a.scrollWidth||void 0===a.clientWidth?!0:void 0===a.scrollHeight||void 0===a.clientHeight?!0:!1},allowsVerticalScroll:function(a,b){var c=b.overflowY;return"scroll"==c?!0:"auto"==c&&a.scrollHeight>a.clientHeight?!0:!1},allowsHorizontalScroll:function(a,b){var c=b.overflowX;return"scroll"==c?!0:"auto"==c&&a.scrollWidth>a.clientWidth?!0:!1},checkDOMTree:function(b,c){if(g&&this.panElementId==b.id)return this.isPanning_=!0,void 0;if(a.feat.nativeTouchScroll){if(this.ignoreScrolling(b))return;var d=window.getComputedStyle(b);if(this.allowsVerticalScroll(b,d))return this.isScrollingVertical_=!0,this.scrollingEl_=b,this.isScrolling=!0,void 0;this.allowsHorizontalScroll(b,d)&&(this.isScrollingVertical_=!1,this.scrollingEl_=null,this.isScrolling=!0)}var e=b==c;!e&&b.parentNode&&this.checkDOMTree(b.parentNode,c)},scrollEnded:function(a){a&&this.scrollTimeoutEl_.removeEventListener("scroll",this.scrollEndedProxy_,!1),this.fireEvent("UIEvents","scrollend",this.scrollTimeoutEl_,!1,!1),this.scrollTimeoutEl_=null},onTouchMove:function(b){var c=this.moved;return this.moved=!0,e&&(this.cY=b.touches[0].pageY-this.dY,this.cX=b.touches[0].pageX-this.dX),this.isPanning_?void 0:(this.isScrolling&&(c||this.fireEvent("UIEvents","scrollstart",this.scrollingEl_,!1,!1),this.speedY=(this.lastY-b.touches[0].pageY)/(b.timeStamp-this.lastTimestamp),this.lastY=b.touches[0].pageY,this.lastX=b.touches[0].pageX,this.lastTimestamp=b.timeStamp),a.os.blackberry10||this.requiresNativeTap?void 0:(this.isScrolling&&a.feat.nativeTouchScroll||b.preventDefault(),void 0))},onTouchEnd:function(b){if(a.os.ios){if(j==b.changedTouches[0].identifier)return b.preventDefault(),!1;j=b.changedTouches[0].identifier}var c=this.moved;if(e&&(c=c&&!(Math.abs(this.cX)<10&&Math.abs(this.cY)<10)),jq.os.ios&&this.requiresNativeTap||(this.allowDocumentScroll_=!1),this.isPanning_&&c)this.wasPanning_=!0;else if(c||this.requiresNativeTap)c&&(this.isScrolling&&(this.scrollTimeoutEl_=this.scrollingEl_,Math.abs(this.speedY)<.01?this.scrollEnded(!1):this.scrollTimeout_=setTimeout(this.scrollTimeoutExpireProxy_,30)),this.requiresNativeTap&&(this.isFocused_||a.trigger(this,"cancel-enter-edit",[b.target])));else if(b.preventDefault(),!this.blockClicks&&!this.blockPossibleClick_){var d=b.target;3==d.nodeType&&(d=d.parentNode),this.fireEvent("Event","click",d,!0,b.mouseToTouch,b.changedTouches[0]),this.lastTouchStartX=this.dX,this.lastTouchStartY=this.dY}this.clearTouchVars()},clearTouchVars:function(){this.speedY=this.lastY=this.cY=this.cX=this.dX=this.dY=0,this.moved=!1,this.isPanning_=!1,this.isScrolling=!1,this.isScrollingVertical_=!1,this.requiresNativeTap=!1,this.blockPossibleClick_=!1},fireEvent:function(b,c,d,e,f,g){var h=document.createEvent(b);h.initEvent(c,e,!0),h.target=d,g&&a.each(g,function(a,b){h[a]=b}),f&&(h.mouseToTouch=!0),d.dispatchEvent(h)}}}(jq),function(a){var b=(window.location.pathname,window.location.hash),c=b,d=function(){var b=this;this.availableTransitions={},this.availableTransitions["default"]=this.availableTransitions.none=this.noTransition,jq(document).ready(function(){var b=document.getElementById("jQUi");if(null==b){b=document.createElement("div"),b.id="jQUi";for(var c=document.body;c.firstChild;)b.appendChild(c.firstChild);jq(document.body).prepend(b)}jq.os.supportsTouch&&a.touchLayer(b)}),window.AppMobi?document.addEventListener("appMobi.device.ready",function(){b.autoBoot(),this.removeEventListener("appMobi.device.ready",arguments.callee)},!1):"complete"==document.readyState||"loaded"==document.readyState?this.autoBoot():document.addEventListener("DOMContentLoaded",function(){b.autoBoot(),this.removeEventListener("DOMContentLoaded",arguments.callee)},!1),window.AppMobi||(AppMobi={},AppMobi.webRoot=""),window.addEventListener("popstate",function(){var c=a.ui.getPanelId(document.location.hash);""==c&&1===a.ui.history.length&&(c="#"+a.ui.firstDiv.id),""!=c&&0!==document.querySelectorAll(c+".panel").length&&c!="#"+a.ui.activeDiv.id&&b.goBack()},!1)};d.prototype={showLoading:!0,loadContentQueue:[],isAppMobi:!1,titlebar:"",navbar:"",header:"",viewportContainer:"",backButton:"",remotePages:{},history:[],homeDiv:"",screenWidth:"",content:"",modalWindow:"",customFooter:!1,defaultFooter:"",defaultHeader:null,customMenu:!1,defaultMenu:"",_readyFunc:null,doingTransition:!1,passwordBox:jq.passwordBox?new jq.passwordBox:!1,selectBox:jq.selectBox?jq.selectBox:!1,ajaxUrl:"",transitionType:"slide",scrollingDivs:[],firstDiv:"",hasLaunched:!1,launchCompleted:!1,activeDiv:"",customClickHandler:"",activeDiv:"",menuAnimation:null,togglingSideMenu:!1,autoBoot:function(){this.hasLaunched=!0,this.autoLaunch&&this.launch()},css3animate:function(a,b){return a=jq(a),a.css3Animate(b)},loadDefaultHash:!0,useAjaxCacheBuster:!1,actionsheet:function(a){return jq("#jQUi").actionsheet(a)},popup:function(b){return a("#jQUi").popup(b)},blockUI:function(b){a.blockUI(b)},unblockUI:function(){a.unblockUI()},removeFooterMenu:function(){jq("#navbar").hide(),jq("#content").css("bottom","0px"),this.showNavMenu=!1},showNavMenu:!0,autoLaunch:!0,showBackbutton:!0,backButtonText:"",resetScrollers:!0,ready:function(a){this.launchCompleted?a():document.addEventListener("jq.ui.ready",function(){a(),this.removeEventListener("jq.ui.ready",arguments.callee)
},!1)},setBackButtonStyle:function(a){jq("#backButton").get(0).className=a},goBack:function(){if(this.history.length>0){var a=this,b=this.history.pop();a.loadContent(b.target+"",0,1,b.transition),a.transitionType=b.transition,a.updateHash(b.target)}},clearHistory:function(){this.history=[],this.setBackButtonVisibility(!1)},pushHistory:function(a,b,c,d){this.history.push({target:a,transition:c});try{return}catch(e){}},updateHash:function(a){return},getPanelId:function(a){var b=a.indexOf("/");return-1==b?a:a.substring(0,b)},updateBadge:function(a,b,c,d){void 0===c&&(c=""),"#"!=a[0]&&(a="#"+a);var e=jq(a).find("span.jq-badge");0==e.length?("absolute"!=jq(a).css("position")&&jq(a).css("position","relative"),e=jq("<span class='jq-badge "+c+"'>"+b+"</span>"),jq(a).append(e)):e.html(b),jq.isObject(d)?e.css(d):d&&e.css("background",d),e.data("ignore-pressed","true")},removeBadge:function(a){jq(a).find("span.jq-badge").remove()},toggleNavMenu:function(a){this.showNavMenu&&("none"!=jq("#navbar").css("display")&&(void 0!==a&&a!==!0||void 0===a)?(jq("#content").css("bottom","0px"),jq("#navbar").hide()):(void 0===a||void 0!==a&&a===!0)&&(jq("#navbar").show(),jq("#content").css("bottom",jq("#navbar").css("height"))))},toggleHeaderMenu:function(a){if("none"!=jq("#header").css("display")&&(void 0!==a&&a!==!0||void 0===a))jq("#content").css("top","0px"),jq("#header").hide();else if(void 0===a||void 0!==a&&a===!0){jq("#header").show();var b=numOnly(jq("#header").css("height"));jq("#content").css("top",b+"px")}},toggleSideMenu:function(a,b){if(this.isSideMenuEnabled()&&!this.togglingSideMenu){this.togglingSideMenu=!0;var c=this,d=jq("#menu"),e=jq("#content, #menu, #header, #navbar");d.hasClass("on")||d.hasClass("to-on")||(void 0===a||a===!1)&&void 0!==a?(void 0===a||void 0!==a&&a===!1)&&c.css3animate(e,{removeClass:"on off to-on",addClass:"to-off",complete:function(a){a?(c.togglingSideMenu=!1,b&&b(!0)):c.css3animate(e,{removeClass:"to-off on to-on",addClass:"off",time:0,complete:function(){d.hide(),c.togglingSideMenu=!1,b&&b(!1)}})}}):(d.show(),c.css3animate(e,{removeClass:"to-off off on",addClass:"to-on",complete:function(a){a?(c.togglingSideMenu=!1,b&&b(!0)):c.css3animate(e,{removeClass:"to-off off to-on",addClass:"on",time:0,complete:function(){c.togglingSideMenu=!1,b&&b(!1)}})}}))}},disableSideMenu:function(){var a=jq("#content, #menu, #header, #navbar");this.isSideMenuOn()?this.toggleSideMenu(!1,function(b){b||a.removeClass("hasMenu")}):a.removeClass("hasMenu")},enableSideMenu:function(){var a=jq("#content, #menu, #header, #navbar");a.addClass("hasMenu")},isSideMenuEnabled:function(){return jq("#content").hasClass("hasMenu")},isSideMenuOn:function(){var a=jq("#menu");return this.isSideMenuEnabled()&&(a.hasClass("on")||a.hasClass("to-on"))},updateNavbarElements:function(a){var b=jq("#navbar");if(void 0!==a&&null!=a){if("string"==typeof a)return b.html(a,!0),null;b.html("");for(var c=0;c<a.length;c++){var d=a[c].cloneNode(!0);b.append(d)}var e=jq("#navbar a");e.length>0&&e.data("ignore-pressed","true").data("resetHistory","true")}},updateHeaderElements:function(a){var b=jq("#header");if(void 0!==a&&null!=a){if("string"==typeof a)return b.html(a,!0),null;b.html("");for(var c=0;c<a.length;c++){var d=a[c].cloneNode(!0);b.append(d)}}},updateSideMenu:function(a){var b=this,c=jq("#menu_scroller");if(void 0!==a&&null!=a){if("string"==typeof a)c.html(a,!0);else{c.html("");var d=document.createElement("a");d.className="closebutton jqMenuClose",d.href="javascript:;",d.onclick=function(){b.toggleSideMenu(!1)},c.append(d);var e=document.createElement("div");e.className="jqMenuHeader",e.innerHTML="Menu",c.append(e);for(var f=0;f<a.length;f++){var g=a[f].cloneNode(!0);c.append(g)}}this.scrollingDivs.menu_scroller.hideScrollbars(),this.scrollingDivs.menu_scroller.scrollToTop()}},setTitle:function(a){jq("#header #pageTitle").html(a)},setBackButtonText:function(a){this.backButtonText.length>0?jq("#header #backButton").html(this.backButtonText):jq("#header #backButton").html(a)},setBackButtonVisibility:function(a){a?jq("#header #backButton").css("visibility","visible"):jq("#header #backButton").css("visibility","hidden")},showMask:function(a){a||(a="正在加载..."),jq("#jQui_mask>h1").html(a),jq("#jQui_mask").show()},hideMask:function(){jq("#jQui_mask").hide()},showModal:function(b){var c=this;b="#"+b.replace("#","");try{jq(b)&&(jq("#modalContainer").html(a.feat.nativeTouchScroll?jq(b).html():jq(b).get(0).childNodes[0].innerHTML+"",!0),jq("#modalContainer").append("<a href='javascript:;' onclick='$.ui.hideModal();' class='closebutton modalbutton'></a>"),this.modalWindow.style.display="block",button=null,content=null,this.scrollingDivs.modal_container.enable(c.resetScrollers),this.scrollToTop("modal"),jq("#modalContainer").data("panel",b))}catch(d){console.log("Error with modal - "+d,this.modalWindow)}},hideModal:function(){a("#modalContainer").html("",!0),jq("#jQui_modal").hide(),this.scrollingDivs.modal_container.disable();var b=a(a("#modalContainer").data("panel")),c=b.data("unload");"string"==typeof c&&window[c]&&window[c](b.get(0)),b.trigger("unloadpanel")},updateContentDiv:function(b,c){b="#"+b.replace("#","");var d=jq(b).get(0);if(d){var e=document.createElement("div");e.innerHTML=c,a(e).children(".panel")&&a(e).children(".panel").length>0&&(e=a(e).children(".panel").get()),d.getAttribute("js-scrolling")&&"yes"==d.getAttribute("js-scrolling").toLowerCase()?(a.cleanUpContent(d.childNodes[0],!1,!0),d.childNodes[0].innerHTML=c):(a.cleanUpContent(d,!1,!0),d.innerHTML=c),a(e).title&&(d.title=a(e).title)}},addContentDiv:function(b,c,d,e,f){b="string"!=typeof b?b:-1==b.indexOf("#")?"#"+b:b;var g=jq(b).get(0);if(g)h=g;else{var h=document.createElement("div");h.innerHTML=c,a(h).children(".panel")&&a(h).children(".panel").length>0&&(h=a(h).children(".panel").get()),!h.title&&d&&(h.title=d);var i=h.id?h.id:b.replace("#","");h.id=i,h.id!=b&&h.setAttribute("data-crc",b.replace("#",""))}return h.className="panel",i=h.id,this.addDivAndScroll(h,e,f),g=null,h=null,i},addDivAndScroll:function(b,c,d,e){var f=!1,g=b.style.overflow,h="hidden"!=g&&"visible"!=g;if(e=e||this.content,!a.feat.nativeTouchScroll&&h&&b.setAttribute("js-scrolling","yes"),b.getAttribute("js-scrolling")&&"yes"==b.getAttribute("js-scrolling").toLowerCase()&&(f=!0,h=!0),b.getAttribute("scrolling")&&"no"==b.getAttribute("scrolling")&&(h=!1,f=!1,b.removeAttribute("js-scrolling")),f){var i=b.cloneNode(!1);b.title=null,b.id=null,b.removeAttribute("data-footer"),b.removeAttribute("data-nav"),b.removeAttribute("data-header"),b.removeAttribute("selected"),b.removeAttribute("data-load"),b.removeAttribute("data-unload"),b.removeAttribute("data-tab"),jq(b).replaceClass("panel","jqmScrollPanel"),i.appendChild(b),e.appendChild(i),this.selectBox!==!1&&this.selectBox.getOldSelects(i.id),this.passwordBox!==!1&&this.passwordBox.getOldPasswords(i.id)}else{e.appendChild(b);var i=b;b.style["-webkit-overflow-scrolling"]="none"}h&&(this.scrollingDivs[i.id]=jq(b).scroller({scrollBars:!0,verticalScroll:!0,horizontalScroll:!1,vScrollCSS:"jqmScrollbar",refresh:c,useJsScroll:f,noParent:!f,autoEnable:!1}),d&&a.bind(this.scrollingDivs[i.id],"refresh-release",function(a){a&&d()})),b=null,i=null},scrollToTop:function(a){this.scrollingDivs[a]&&this.scrollingDivs[a].scrollToTop("300ms")},scrollToBottom:function(a){this.scrollingDivs[a]&&this.scrollingDivs[a].scrollToBottom("300ms")},parsePanelFunctions:function(b,c){var d=this,e=b.getAttribute("data-footer"),f=b.getAttribute("data-header");e&&"none"==e.toLowerCase()?d.toggleNavMenu(!1):d.toggleNavMenu(!0),e&&d.customFooter!=e?(d.customFooter=e,d.updateNavbarElements(jq("#"+e).children())):e!=d.customFooter&&(d.customFooter&&d.updateNavbarElements(d.defaultFooter),d.customFooter=!1),f&&"none"==f.toLowerCase()?d.toggleHeaderMenu(!1):d.toggleHeaderMenu(!0),f&&d.customHeader!=f?(d.customHeader=f,d.updateHeaderElements(jq("#"+f).children())):f!=d.customHeader&&(d.customHeader&&(d.updateHeaderElements(d.defaultHeader),d.setTitle(d.activeDiv.title)),d.customHeader=!1),b.getAttribute("data-tab")&&(jq("#navbar a").removeClass("selected"),jq("#"+b.getAttribute("data-tab")).addClass("selected"));var g=a(b).find("footer");g.length>0&&(d.customFooter=b.id,d.updateNavbarElements(g.children()));var h=a(b).find("header");h.length>0&&(d.customHeader=b.id,d.updateHeaderElements(h.children())),b.getAttribute("data-tab")&&(jq("#navbar a").removeClass("selected"),jq("#navbar #"+b.getAttribute("data-tab")).addClass("selected"));var i=b.getAttribute("data-nav");i&&this.customMenu!=i?(this.customMenu=i,this.updateSideMenu(jq("#"+i).children())):i!=this.customMenu&&(this.customMenu&&this.updateSideMenu(this.defaultMenu),this.customMenu=!1),c&&(j=c.getAttribute("data-unload"),"string"==typeof j&&window[j]&&window[j](c),a(c).trigger("unloadpanel"));var j=b.getAttribute("data-load");"string"==typeof j&&window[j]&&window[j](b),a(b).trigger("loadpanel"),this.isSideMenuOn()&&this.toggleSideMenu(!1)},parseScriptTags:function(b){b&&a.parseJS(b)},loadContent:function(a,b,c,d,e){if(this.doingTransition)return this.loadContentQueue.push([a,b,c,d,e]),void 0;if(0!==a.length){what=null;var f=!0;if(e=e||document.createElement("a"),-1==a.indexOf("#")){var h="url"+g(a),i=jq("div.panel[data-crc='"+h+"']");jq("#"+a).length>0?f=!1:i.length>0?(f=!1,"true"===e.getAttribute("data-refresh-ajax")||e.refresh&&e.refresh===!0||this.isAjaxApp?f=!0:a="#"+i.get(0).id):jq("#"+h).length>0&&(f=!1,"true"===e.getAttribute("data-refresh-ajax")||e.refresh&&e.refresh===!0||this.isAjaxApp?f=!0:a="#"+h)}-1==a.indexOf("#")&&f?this.loadAjax(a,b,c,d,e):this.loadDiv(a,b,c,d)}},loadDiv:function(b,d,e,f){var g=this;what=b.replace("#","");var h=what.indexOf("/"),i="";if(-1!=h&&(i=what.substr(h),what=what.substr(0,h)),what=jq("#"+what).get(0),!what)return console.log("Target: "+b+" was not found");if(what==this.activeDiv&&!e)return this.isSideMenuOn()&&this.toggleSideMenu(!1),void 0;this.transitionType=f;var j=this.activeDiv,k=what;if("true"==what.getAttribute("data-modal")||"true"==what.getAttribute("modal")){var l=what.getAttribute("data-load");return"string"==typeof l&&window[l]&&window[l](what),a(what).trigger("loadpanel"),this.showModal(what.id)}if(j!=k){d?(this.clearHistory(),this.pushHistory("#"+this.firstDiv.id,what.id,f,i)):e||this.pushHistory(c,what.id,f,i),c="#"+what.id+i,this.doingTransition=!0,j.style.display="block",k.style.display="block",this.runTransition(f,j,k,e),this.parsePanelFunctions(what,j),this.loadContentData(what,d,e,f);var g=this;setTimeout(function(){g.scrollingDivs[j.id]&&g.scrollingDivs[j.id].disable()},200)}},loadContentData:function(a,b,c){if(c){if(this.history.length>0){var d=this.history[this.history.length-1],e=d.target.indexOf("/");if(-1!=e)var f=d.target.substr(0,e);else var f=d.target;var g=jq(f).get(0);g?this.setBackButtonText(g.title):this.setBackButtonText("Back")}}else this.activeDiv.title?this.setBackButtonText(this.activeDiv.title):this.setBackButtonText("Back");a.title&&this.setTitle(a.title),b&&this.setBackButtonText(this.firstDiv.title),0==this.history.length?(this.setBackButtonVisibility(!1),this.history=[]):this.showBackbutton&&this.setBackButtonVisibility(!0),this.activeDiv=a,this.scrollingDivs[this.activeDiv.id]&&this.scrollingDivs[this.activeDiv.id].enable(this.resetScrollers)},loadAjax:function(a,b,c,d,e){if("jQui_ajax"!=this.activeDiv.id||a!=this.ajaxUrl){var f="url"+g(a),h=this;-1==a.indexOf("http")&&(a=AppMobi.webRoot+a);var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState&&200==i.status){this.doingTransition=!1;var g=!1;if(jq("#"+f).length>0)h.updateContentDiv(f,i.responseText),jq("#"+f).get(0).title=e.title?e.title:a;else if(e.getAttribute("data-persist-ajax")||h.isAjaxApp){var j="true"===e.getAttribute("data-pull-scroller")?!0:!1;refreshFunction=j?function(){e.refresh=!0,h.loadContent(a,b,c,d,e),e.refresh=!1}:null,f=h.addContentDiv(f,i.responseText,e.title?e.title:a,j,refreshFunction)}else h.updateContentDiv("jQui_ajax",i.responseText),jq("#jQui_ajax").get(0).title=e.title?e.title:a,h.loadContent("#jQui_ajax",b,c),g=!0;var k=document.createElement("div");return k.innerHTML=i.responseText,h.parseScriptTags(k),g?(h.showLoading&&h.hideMask(),void 0):(h.loadContent("#"+f),h.showLoading&&h.hideMask(),null)}},ajaxUrl=a;var j=this.useAjaxCacheBuster?a+(a.split("?")[1]?"&":"?")+"cache="+1e16*Math.random():a;i.open("GET",j,!0),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(),this.showLoading&&this.showMask()}},runTransition:function(a,b,c,d){this.availableTransitions[a]||(a="default"),this.availableTransitions[a].call(this,b,c,d)},launch:function(){if(0==this.hasLaunched||this.launchCompleted)return this.hasLaunched=!0,void 0;var d=this;this.isAppMobi=window.AppMobi&&"object"==typeof AppMobi&&void 0!==AppMobi.app?!0:!1,this.viewportContainer=jq("#jQUi"),this.navbar=jq("#navbar").get(0),this.content=jq("#content").get(0),this.header=jq("#header").get(0),this.menu=jq("#menu").get(0),this.viewportContainer[0].addEventListener("click",function(a){var b=a.target;e(a,b)},!1);var f=null;a.bind(a.touchLayer,"enter-edit",function(a){f=a}),a.bind(a.touchLayer,"enter-edit-reshape",function(){var b=a(f),c=b.closest(d.activeDiv);if(c&&c.size()>0)if(a.os.ios||a.os.chrome){var e,g;e=document.body.scrollTop?document.body.scrollTop-c.offset().top:0,g=c.offset().bottom-b.offset().bottom,d.scrollingDivs[d.activeDiv.id].setPaddings(e,g)}else if(a.os.android||a.os.blackberry){var h=b.offset(),i=c.offset();h.bottom>i.bottom&&h.height<i.height&&d.scrollingDivs[d.activeDiv.id].scrollToItem(b,"bottom")}}),a.os.ios&&a.bind(a.touchLayer,"exit-edit-reshape",function(){d.scrollingDivs[d.activeDiv.id].setPaddings(0,0)}),this.navbar||(this.navbar=document.createElement("div"),this.navbar.id="navbar",this.navbar.style.cssText="display:none",this.viewportContainer.append(this.navbar)),this.header||(this.header=document.createElement("div"),this.header.id="header",this.viewportContainer.prepend(this.header)),this.menu||(this.menu=document.createElement("div"),this.menu.id="menu",this.menu.innerHTML='<div id="menu_scroller"></div>',this.viewportContainer.append(this.menu),this.menu.style.overflow="hidden",this.scrollingDivs.menu_scroller=jq("#menu_scroller").scroller({scrollBars:!0,verticalScroll:!0,vScrollCSS:"jqmScrollbar",useJsScroll:!a.feat.nativeTouchScroll,noParent:a.feat.nativeTouchScroll}),a.feat.nativeTouchScroll&&a("#menu_scroller").css("height","100%")),this.content||(this.content=document.createElement("div"),this.content.id="content",this.viewportContainer.append(this.content)),this.header.innerHTML='<a id="backButton"  href="javascript:;"></a> <h1 id="pageTitle"></h1>'+header.innerHTML,this.backButton=a("#header #backButton").get(0),this.backButton.className="button",jq(document).on("click","#header #backButton",function(a){a.preventDefault(),d.goBack()}),this.backButton.style.visibility="hidden",this.titleBar=a("#header #pageTitle").get(0),this.addContentDiv("jQui_ajax","");var g=document.createElement("div");g.id="jQui_mask",g.className="ui-loader",g.innerHTML="<span class='ui-icon ui-icon-loading spin'></span><h1>Loading Content</h1>",g.style.zIndex=2e4,g.style.display="none",document.body.appendChild(g);var h=document.createElement("div");h.id="jQui_modal",this.viewportContainer.prepend(h),h.appendChild(jq("<div id='modalContainer'></div>").get()),this.scrollingDivs.modal_container=jq("#modalContainer").scroller({scrollBars:!0,vertical:!0,vScrollCSS:"jqmScrollbar",noParent:!0}),this.modalWindow=h;for(var i={},j=this.viewportContainer.get().querySelectorAll(".panel"),k=0;k<j.length;k++){var l,m=j[k],n=m,o=m.previousSibling;m.parentNode&&"content"!=m.parentNode.id?(m.parentNode.removeChild(m),l=m.id,n.getAttribute("selected")&&(this.firstDiv=jq("#"+l).get(0)),this.addDivAndScroll(n),jq("#"+l).insertAfter(o)):m.parsedContent||(m.parsedContent=1,m.parentNode.removeChild(m),l=m.id,n.getAttribute("selected")&&(this.firstDiv=jq("#"+l).get(0)),this.addDivAndScroll(n),jq("#"+l).insertAfter(o)),m.getAttribute("data-defer")&&(i[l]=m.getAttribute("data-defer")),this.firstDiv||(this.firstDiv=a("#"+l).get(0)),m=null}j=null;var p=!1,q=Object.keys(i).length;if(q>0){p=!0;var r=0;for(var s in i)!function(b){jq.ajax({url:AppMobi.webRoot+i[b],success:function(c){0!=c.length&&(a.ui.updateContentDiv(b,c),d.parseScriptTags(jq(b).get()),r++,r>=q&&(a(document).trigger("defer:loaded"),p=!1))},error:function(){console.log("Error with deferred load "+AppMobi.webRoot+i[b]),r++,r>=q&&(a(document).trigger("defer:loaded"),p=!1)}})}(s)}if(this.firstDiv){var d=this;this.activeDiv=this.firstDiv,this.scrollingDivs[this.activeDiv.id]&&this.scrollingDivs[this.activeDiv.id].enable();var t=function(){jq("#navbar a").length>0&&(jq("#navbar a").data("ignore-pressed","true").data("resetHistory","true"),d.defaultFooter=jq("#navbar").children().clone(),d.updateNavbarElements(d.defaultFooter));var e=jq("nav").get();e&&(d.defaultMenu=jq(e).children().clone(),d.updateSideMenu(d.defaultMenu)),d.defaultHeader=jq("#header").children().clone(),jq("#navbar").on("click","a",function(b){jq("#navbar a").not(this).removeClass("selected"),a(b.target).addClass("selected")});var f=d.getPanelId(b);f.length>0&&d.loadDefaultHash&&f!="#"+d.firstDiv.id&&a(f).length>0?d.loadContent(b,!0,!1,"none"):(c="#"+d.firstDiv.id,d.parsePanelFunctions(d.firstDiv),d.loadContentData(d.firstDiv),d.firstDiv.style.display="block",a("#header #backButton").css("visibility","hidden"),("true"==d.firstDiv.getAttribute("data-modal")||"true"==d.firstDiv.getAttribute("modal"))&&d.showModal(d.firstDiv.id)),d.launchCompleted=!0,jq("nav").length>0&&(jq("#jQUi #header").addClass("hasMenu off"),jq("#jQUi #content").addClass("hasMenu off"),jq("#jQUi #navbar").addClass("hasMenu off")),jq(document).trigger("jq.ui.ready"),jq("#splashscreen").remove()};p?a(document).one("defer:loaded",t):t()}var d=this;a.bind(d,"content-loaded",function(){if(d.loadContentQueue.length>0){var a=d.loadContentQueue.splice(0,1)[0];d.loadContent(a[0],a[1],a[2],a[3],a[4])}}),window.navigator.standalone&&this.blockPageScroll(),this.topClickScroll()},topClickScroll:function(){document.getElementById("header").addEventListener("click",function(b){b.clientY<=15&&"h1"==b.target.nodeName.toLowerCase()&&a.ui.scrollingDivs[a.ui.activeDiv.id].scrollToTop("100")})},blockPageScroll:function(){jq("#jQUi #header").bind("touchmove",function(a){a.preventDefault()})},noTransition:function(a,b){b.style.display="block",a.style.display="block";var c=this;c.clearAnimations(b),c.css3animate(a,{x:"0%",y:0}),c.finishTransition(a),b.style.zIndex=2,a.style.zIndex=1},finishTransition:function(b,c){b.style.display="none",this.doingTransition=!1,c&&this.clearAnimations(c),b&&this.clearAnimations(b),a.trigger(this,"content-loaded")},clearAnimations:function(b){b.style[a.feat.cssPrefix+"Transform"]="none",b.style[a.feat.cssPrefix+"Transition"]="none"}};var e=function(a,b){if(b!=jQUi){if("a"!=b.tagName.toLowerCase()&&b.parentNode)return e(a,b.parentNode);if("undefined"!==b.tagName&&"a"==b.tagName.toLowerCase()){var c="function"==typeof jq.ui.customClickHandler?jq.ui.customClickHandler:!1;if(c!==!1&&jq.ui.customClickHandler(b))return a.preventDefault();if(-1!==b.href.toLowerCase().indexOf("javascript:")||b.getAttribute("data-ignore"))return;if(0===b.href.indexOf("tel:"))return!1;if(-1===b.hash.indexOf("#")&&b.target.length>0)return 0!=b.href.toLowerCase().indexOf("javascript:")&&(jq.ui.isAppMobi?(a.preventDefault(),AppMobi.device.launchExternal(b.href)):jq.os.desktop||(a.target.target="_blank")),void 0;var d=b.href,f=location.protocol+"//"+location.hostname+":"+location.port;if(0===d.indexOf(f)&&(d=d.substring(f.length+1)),"#"==d||d.indexOf("#")===d.length-1||0==d.length&&0==b.hash.length)return;a.preventDefault();var g=b.getAttribute("data-transition"),h=b.getAttribute("data-resetHistory");h=h&&"true"==h.toLowerCase()?!0:!1;var d=b.hash.length>0?b.hash:b.href;return jq.ui.loadContent(d,h,0,g,b),void 0}}},f="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D",g=function(a,b){void 0==b&&(b=0);var c=0,d=0;b=-1^b;for(var e=0,g=a.length;g>e;e++)c=255&(b^a.charCodeAt(e)),d="0x"+f.substr(9*c,8),b=b>>>8^d;return-1^b};a.ui=new d}(jq),function(a){a(document).one("appMobi.device.ready",function(){setTimeout(function(){document.getElementById("jQUi").style.height="100%",document.body.style.height="100%",document.documentElement.style.minHeight=window.innerHeight},300),a.ui.ready(function(){a.ui.blockPageScroll()})}),a.feat.nativeTouchScroll&&document.addEventListener("orientationchange",function(){if(a.ui.scrollingDivs[a.ui.activeDiv.id]){var b=a.ui.scrollingDivs[a.ui.activeDiv.id];0==b.el.scrollTop&&(b.disable(),setTimeout(function(){b.enable()},300))}})}(jq),function(a){function b(a,b,c){a.style.display="block",b.style.display="block";var d=this;c?(b.style.zIndex=1,a.style.zIndex=2,d.clearAnimations(b),d.css3animate(a,{x:"0%",time:"150ms",opacity:.1,complete:function(c){return c?(d.finishTransition(a,b),void 0):(d.css3animate(a,{x:"-100%",opacity:1,complete:function(){d.finishTransition(a)}}),b.style.zIndex=2,a.style.zIndex=1,void 0)}})):(a.style.zIndex=1,b.style.zIndex=2,b.style.opacity=0,d.css3animate(b,{x:"0%",opacity:.1,complete:function(){d.css3animate(b,{x:"0%",time:"150ms",opacity:1,complete:function(c){return c?(d.finishTransition(a,b),void 0):(d.clearAnimations(b),d.css3animate(a,{x:"-100%",y:0,complete:function(){d.finishTransition(a)}}),void 0)}})}}))}a.availableTransitions.fade=b}(jq.ui),function(a){function b(a,b,c){a.style.display="block",b.style.display="block";var d=this;c?(d.css3animate(b,{x:"100%",scale:.8,rotateY:"180deg",complete:function(){d.css3animate(b,{x:"0%",scale:1,time:"150ms",rotateY:"0deg",complete:function(){d.clearAnimations(b)}})}}),d.css3animate(a,{x:"100%",time:"150ms",scale:.8,rotateY:"180deg",complete:function(){d.css3animate(a,{x:"-100%",opacity:1,scale:1,rotateY:"0deg",complete:function(){d.finishTransition(a)}}),b.style.zIndex=2,a.style.zIndex=1}})):(a.style.zIndex=1,b.style.zIndex=2,d.css3animate(a,{x:"100%",time:"150ms",scale:.8,rotateY:"180deg",complete:function(){d.css3animate(a,{x:"-100%",y:0,time:"1ms",scale:1,rotateY:"0deg",complete:function(){d.finishTransition(a)}})}}),d.css3animate(b,{x:"100%",time:"1ms",scale:.8,rotateY:"180deg",complete:function(){d.css3animate(b,{x:"0%",time:"150ms",scale:1,rotateY:"0deg",complete:function(){d.clearAnimations(b)}})}}))}a.availableTransitions.flip=b}(jq.ui),function(a){function b(a,b,c){a.style.display="block",b.style.display="block";var d=this;c?(b.style.zIndex=1,a.style.zIndex=2,d.clearAnimations(b),d.css3animate(a,{x:"0%",time:"150ms",opacity:.1,scale:.2,origin:"-50% 50%",complete:function(c){return c?(d.finishTransition(a),void 0):(d.css3animate(a,{x:"-100%",complete:function(){d.finishTransition(a)}}),b.style.zIndex=2,a.style.zIndex=1,void 0)}})):(a.style.zIndex=1,b.style.zIndex=2,d.css3animate(b,{x:"0%",y:"0%",scale:.2,origin:"-50% 50%",opacity:.1,complete:function(){d.css3animate(b,{x:"0%",time:"150ms",scale:1,opacity:1,origin:"0% 0%",complete:function(c){return c?(d.finishTransition(a,b),void 0):(d.clearAnimations(b),d.css3animate(a,{x:"100%",y:0,complete:function(){d.finishTransition(a)}}),void 0)}})}}))}a.availableTransitions.pop=b}(jq.ui),function(a){function b(a,b,c){a.style.display="block",b.style.display="block";var d=this;c?d.css3animate(a,{x:"0%",y:"0%",complete:function(){d.css3animate(a,{x:"100%",time:"150ms",complete:function(){d.finishTransition(a,b)}}).link(b,{x:"0%",time:"150ms"})}}).link(b,{x:"-100%",y:"0%"}):d.css3animate(a,{x:"0%",y:"0%",complete:function(){d.css3animate(a,{x:"-100%",time:"150ms",complete:function(){d.finishTransition(a,b)}}).link(b,{x:"0%",time:"150ms"})}}).link(b,{x:"100%",y:"0%"})}a.availableTransitions.slide=b,a.availableTransitions["default"]=b}(jq.ui),function(a){function b(a,b,c){a.style.display="block",b.style.display="block";var d=this;c?(b.style.zIndex=1,a.style.zIndex=2,d.clearAnimations(b),d.css3animate(a,{y:"-100%",x:"0%",time:"150ms",complete:function(c){return c?(d.finishTransition(a,b),void 0):(d.css3animate(a,{x:"-100%",y:0,complete:function(){d.finishTransition(a)}}),b.style.zIndex=2,a.style.zIndex=1,void 0)}})):(a.style.zIndex=1,b.style.zIndex=2,d.css3animate(b,{y:"-100%",x:"0%",complete:function(){d.css3animate(b,{y:"0%",x:"0%",time:"150ms",complete:function(c){return c?(d.finishTransition(a,b),void 0):(d.clearAnimations(b),d.css3animate(a,{x:"-100%",y:0,complete:function(){d.finishTransition(a)}}),void 0)}})}}))}a.availableTransitions.down=b}(jq.ui),function(a){function b(a,b,c){a.style.display="block",b.style.display="block";var d=this;c?(b.style.zIndex=1,a.style.zIndex=2,d.clearAnimations(b),d.css3animate(a,{y:"100%",x:"0%",time:"150ms",complete:function(){d.finishTransition(a),b.style.zIndex=2,a.style.zIndex=1}})):(b.style.zIndex=2,a.style.zIndex=1,d.css3animate(b,{y:"100%",x:"0%",complete:function(){d.css3animate(b,{y:"0%",x:"0%",time:"150ms",complete:function(c){return c?(d.finishTransition(a,b),void 0):(d.clearAnimations(b),d.css3animate(a,{x:"-100%",y:0,complete:function(){d.finishTransition(a)}}),void 0)}})}}))}a.availableTransitions.up=b}(jq.ui);